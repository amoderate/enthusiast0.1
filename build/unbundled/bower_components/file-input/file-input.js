var fileInput=function(){var e,t=function(){"use strict";var e;return e=(document._currentScript||document.currentScript).ownerDocument,function(t,i){var n=e.getElementById(i),r=document.importNode(n.content,!0);t.appendChild(r)}}(),i=function(){"use strict";function e(e,t){switch(t){case Number:return parseFloat(e||0,10);case Boolean:return null!==e;case Object:case Array:return JSON.parse(e);case Date:return new Date(e);default:return e||""}}function t(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function i(e){return e.split("-").map(function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)}).join("")}var n={};return n.serialize=function(e){return"string"==typeof e?e:"number"==typeof e||e instanceof Date?e.toString():JSON.stringify(e)},n.syncProperty=function(t,n,r,a){var o,l=i(r);n[l]&&(o=n[l].type||n[l],t[l]=e(a,o))},n.init=function(i,r){Object.defineProperty(i,"props",{enumerable:!1,configurable:!0,value:{}}),Object.keys(r).forEach(function(a){var o,l,u=t(a);o=r[a].type?r[a]:{type:r[a]},l="function"==typeof o.value?o.value():o.value,i.props[a]=i[a]||l,null===i.getAttribute(u)?o.reflectToAttribute&&i.setAttribute(u,n.serialize(i.props[a])):i.props[a]=e(i.getAttribute(u),o.type),Object.defineProperty(i,a,{get:function(){return i.props[a]||e(i.getAttribute(u),o.type)},set:function(e){var t=i.props[a];i.props[a]=e,o.reflectToAttribute&&(o.type===Boolean?e?i.setAttribute(u,""):i.removeAttribute(u):i.setAttribute(u,n.serialize(e))),"function"==typeof i[o.observer]&&i[o.observer](e,t)}})})},n}(),n=function(e){return Array.prototype.slice.call(e)},r=function(e){var t=e.lastIndexOf(".")+1;if(t>0)return e.substr(t,e.length-t).toLowerCase()},a=function(e,t){return e>0&&e<t.length?{invalid:t.slice(e,t.length),valid:t.slice(0,e)}:{invalid:[],valid:t}},o=function(e,t){if(e){var i="!"===e.charAt(0),n=JSON.parse(e.toLowerCase().substr(i?1:0)),a={invalid:[],valid:[]};return t.forEach(function(e){var t=r(e.name);n.indexOf(t)>=0?a[i?"invalid":"valid"].push(e):a[i?"valid":"invalid"].push(e)}),a}return{invalid:[],valid:t}},l=function(e,t,i){if(!e&&!t)return{tooBig:[],tooSmall:[],valid:i};var n=[],r=[],a=[];return i.forEach(function(i){e&&i.size<e?a.push(i):t&&i.size>t?r.push(i):n.push(i)}),{tooBig:r,tooSmall:a,valid:n}},u=function(){return navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPhone")!==-1},c=function(e){var t=document.createElement("form"),i=e.querySelector(".fileInput"),n=document.createElement("button");n.setAttribute("type","reset"),n.style.display="none",t.appendChild(n),i.parentNode.insertBefore(t,i),t.appendChild(i),n.click(),t.parentNode.appendChild(i),t.parentNode.removeChild(t),e.files=[],e.invalid={count:0},e.valid=[],p(e)},s=function(t){e=document.createElement("input"),e.setAttribute("tabindex","-1"),e.setAttribute("type","text"),e.style.padding="1px",e.style.margin="-1px",e.style.border=0,e.style.height=0,e.style.opacity=0,e.style.width=0,e.className="fileInputDelegate",e.customElementRef=t,t.parentNode.insertBefore(e,t),p(t)},p=function(t){e&&(t.files.length?e.setCustomValidity(""):e.setCustomValidity(t.invalidText))},d={accept:{type:String,observer:"setAccept"},camera:Boolean,directory:{type:Boolean,value:!1,observer:"setDirectory"},extensions:{type:String},maxFiles:{type:Number,value:0,observer:"setMaxFiles"},maxSize:{type:Number,value:0},minSize:{type:Number,value:0},required:{type:Boolean,value:!1}},f=Object.create(HTMLElement.prototype);return f.changeHandler=function(e){e.stopPropagation();var t=this,i=t.querySelector(".fileInput"),r=n(i.files),u={count:0},c=[];if(r.length){var s=l(t.minSize,t.maxSize,r),d=o(t.extensions,s.valid),f=a(t.maxFiles,d.valid);s.tooBig.length&&(u.tooBig=s.tooBig,u.count+=s.tooBig.length),s.tooSmall.length&&(u.tooSmall=s.tooSmall,u.count+=s.tooSmall.length),d.invalid.length&&(u.badExtension=d.invalid,u.count+=d.invalid.length),f.invalid.length&&(u.tooMany=f.invalid,u.count+=f.invalid.length),c=f.valid,t.invalid=u,t.files=c,p(t),t.dispatchEvent(new CustomEvent("change",{detail:{invalid:u,valid:c}}))}},f.invalidText="No valid files selected.",f.setAccept=function(e){var t=this.querySelector(".fileInput");t.setAttribute("accept",e)},f.setDirectory=function(e){var t=this.querySelector(".fileInput");e&&void 0!==t.webkitdirectory?t.setAttribute("webkitdirectory",""):t.removeAttribute("webkitdirectory")},f.setMaxFiles=function(e){var t=this.querySelector(".fileInput");1!==e?t.setAttribute("multiple",""):t.removeAttribute("multiple")},f.attributeChangedCallback=function(e,t,n){i.syncProperty(this,d,e,n)},f.createdCallback=function(){var e,n=this;if(t(this,"file-input"),i.init(this,d),this.setAccept(this.accept),e=n.querySelector(".fileInput"),e.addEventListener("change",this.changeHandler.bind(this)),n.files=[],n.invalid={count:0},n.camera&&u()){n.maxFiles=1;var r="image/*;capture=camera";n.accept&&n.accept.length.trim().length>0?n.accept+=","+r:n.accept=r}this.setMaxFiles(n.maxFiles),this.setDirectory(n.directory),n.required&&s(n)},f.reset=function(){var e=this;c(e)},f}();