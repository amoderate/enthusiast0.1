!function(){var e=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n;for(var r in t)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,r);o&&Object.defineProperty(e,r,o)}else e[r]=t[r]},t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,r=function(e,r){if(r){var o=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var s=e[i];s in o||(o[s]={}),o=o[s]}e=e[e.length-1],i=o[e],r=r(i),r!=i&&null!=r&&t(o,e,{configurable:!0,writable:!0,value:r})}},o=function(){o=function(){},n.Symbol||(n.Symbol=s)},i=0,s=function(e){return"jscomp_symbol_"+(e||"")+i++},a=function(){o();var e=n.Symbol.iterator;e||(e=n.Symbol.iterator=n.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&t(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return c(this)}}),a=function(){}},c=function(e){var t=0;return u(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},u=function(e){return a(),e={next:e},e[n.Symbol.iterator]=function(){return this},e},f=function(e){a();var t=e[Symbol.iterator];return t?t.call(e):c(e)};r("Promise",function(e){function t(){this.a=null}if(e)return e;t.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},t.prototype.f=function(){var e=this;this.c(function(){e.h()})};var r=n.setTimeout;t.prototype.c=function(e){r(e,0)},t.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];delete e[t];try{n()}catch(e){this.g(e)}}}this.a=null},t.prototype.g=function(e){this.c(function(){throw e})};var o=function(e){this.b=0,this.h=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};o.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.ca),reject:e(this.g)}},o.prototype.ca=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof o)this.da(e);else{var t;e:switch(typeof e){case"object":t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.w(e):this.j(e)}},o.prototype.w=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.ea(t,e):this.j(e)},o.prototype.g=function(e){this.o(2,e)},o.prototype.j=function(e){this.o(1,e)},o.prototype.o=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t|"): Promise already settled in state"+this.b);this.b=e,this.h=t,this.v()},o.prototype.v=function(){if(null!=this.a){for(var e=this.a,t=0;t<e.length;++t)e[t].call(),e[t]=null;this.a=null}};var i=new t;return o.prototype.da=function(e){var t=this.f();e.c(t.resolve,t.reject)},o.prototype.ea=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},o.prototype.then=function(e,t){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){i(e)}}:t}var r,i,s=new o(function(e,t){r=e,i=t});return this.c(n(e,r),n(t,i)),s},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.c=function(e,t){function n(){switch(r.b){case 1:e(r.h);break;case 2:t(r.h);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(function(){i.b(n)})},o.resolve=function(e){return e instanceof o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.b=function(e){return new o(function(t,n){for(var r=f(e),i=r.next();!i.done;i=r.next())o.resolve(i.value).c(t,n)})},o.a=function(e){var t=f(e),n=t.next();return n.done?o.resolve([]):new o(function(e,r){function i(t){return function(n){s[t]=n,a--,0==a&&e(s)}}var s=[],a=0;do s.push(void 0),a++,o.resolve(n.value).c(i(s.length-1),r),n=t.next();while(!n.done)})},o.$jscomp$new$AsyncExecutor=function(){return new t},o}),r("Array.prototype.findIndex",function(e){return e?e:function(e,t){e:{var n=this;n instanceof String&&(n=String(n));for(var r=n.length,o=0;o<r;o++)if(e.call(t,n[o],o,n)){e=o;break e}e=-1}return e}}),r("Object.assign",function(e){return e?e:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}});var p=this,h=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},l=function(e,t){function n(){}n.prototype=t.prototype,e.ja=t.prototype,e.prototype=new n,e.fa=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}},d={i:"only-available-in-window",A:"only-available-in-sw",U:"should-be-overriden",l:"bad-sender-id",I:"incorrect-gcm-sender-id",S:"permission-default",R:"permission-blocked",Z:"unsupported-browser",L:"notifications-blocked",F:"failed-serviceworker-registration",m:"sw-registration-expected",H:"get-subscription-failed",K:"invalid-saved-token",s:"sw-reg-redundant",V:"token-subscribe-failed",X:"token-subscribe-no-token",W:"token-subscribe-no-push-set",$:"use-sw-before-get-token",J:"invalid-delete-token",D:"delete-token-not-found",B:"bg-handler-function-expected",P:"no-window-client-to-msg",Y:"unable-to-resubscribe",N:"no-fcm-token-for-resubscribe",G:"failed-to-delete-token",O:"no-sw-in-reg"},g={},y=(g[d.i]="This method is available in a Window context.",g[d.A]="This method is available in a service worker context.",g[d.U]="This method should be overriden by extended classes.",g[d.l]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",g[d.S]="The required permissions were not granted and dismissed instead.",g[d.R]="The required permissions were not granted and blocked instead.",g[d.Z]="This browser doesn't support the API's required to use the firebase SDK.",g[d.L]="Notifications have been blocked.",g[d.F]="We are unable to register the default service worker. {$browserErrorMessage}",g[d.m]="A service worker registration was the expected input.",g[d.H]="There was an error when trying to get any existing Push Subscriptions.",g[d.K]="Unable to access details of the saved token.",g[d.s]="The service worker being used for push was made redundant.",g[d.V]="A problem occured while subscribing the user to FCM: {$message}",g[d.X]="FCM returned no token when subscribing the user to push.",g[d.W]="FCM returned an invalid response when getting an FCM token.",g[d.$]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",g[d.J]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",g[d.D]="The deletion attempt for token could not be performed as the token was not found.",g[d.B]="The input to setBackgroundMessageHandler() must be a function.",g[d.P]="An attempt was made to message a non-existant window client.",g[d.Y]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",g[d.N]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",g[d.G]="Unable to delete the currently saved token.",g[d.O]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",g[d.I]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",g),v={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},b={u:"firebase-messaging-msg-type",C:"firebase-messaging-msg-data"},w={T:"push-msg-received",M:"notification-clicked"},m=function(e,t){var n={};return n[b.u]=e,n[b.C]=t,n},k=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))};l(k,Error);var S=function(e,t){for(var n=e.split("%s"),r="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)r+=n.shift()+o.shift();return r+n.join("%s")},j=function(e,t){t.unshift(e),k.call(this,S.apply(null,t)),t.shift()};l(j,k);var T=function(e,t,n){if(!e){var r="Assertion failed";if(t)var r=r+(": "+t),o=Array.prototype.slice.call(arguments,2);throw new j(""+r,o||[])}},P=null,_=function(e){e=new Uint8Array(e);var t=h(e);if(T("array"==t||"object"==t&&"number"==typeof e.length,"encodeByteArray takes an array as a parameter"),!P)for(P={},t=0;65>t;t++)P[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t);for(var t=P,n=[],r=0;r<e.length;r+=3){var o=e[r],i=r+1<e.length,s=i?e[r+1]:0,a=r+2<e.length,c=a?e[r+2]:0,u=o>>2,o=(3&o)<<4|s>>4,s=(15&s)<<2|c>>6,c=63&c;a||(c=64,i||(s=64)),n.push(t[u],t[o],t[s],t[c])}return n.join("").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},M=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",y),A=function(){this.a=null},E=function(e){return e.a?e.a:(e.a=new Promise(function(e,t){var n=p.indexedDB.open("fcm_token_details_db",1);n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){e=e.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"}),e.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),e.createIndex("fcmToken","fcmToken",{unique:!0})}}),e.a)},I=function(e){e.a?e.a.then(function(t){t.close(),e.a=null}):Promise.resolve()},N=function(e,t){return E(e).then(function(e){return new Promise(function(n,r){var o=e.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(t);o.onerror=function(e){r(e.target.error)},o.onsuccess=function(e){n(e.target.result)}})})},x=function(e,t){return E(e).then(function(e){return new Promise(function(n,r){var o=[],i=e.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();i.onerror=function(e){r(e.target.error)},i.onsuccess=function(e){(e=e.target.result)?(e.value.fcmSenderId===t&&o.push(e.value),e.continue()):n(o)}})})},R=function(e,t,n){var r=_(t.getKey("p256dh")),o=_(t.getKey("auth"));return e="authorized_entity="+e+"&"+("endpoint="+t.endpoint+"&")+("encryption_key="+r+"&")+("encryption_auth="+o),n&&(e+="&pushSet="+n),n=new Headers,n.append("Content-Type","application/x-www-form-urlencoded"),fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",headers:n,body:e}).then(function(e){return e.json()}).then(function(e){if(e.error)throw M.create(d.V,{message:e.error.message});if(!e.token)throw M.create(d.X);if(!e.pushSet)throw M.create(d.W);return{token:e.token,pushSet:e.pushSet}})},W=function(e,t,n,r,o,i){var s={swScope:n.scope,endpoint:r.endpoint,auth:_(r.getKey("auth")),p256dh:_(r.getKey("p256dh")),fcmToken:o,fcmPushSet:i,fcmSenderId:t};return E(e).then(function(e){return new Promise(function(t,n){var r=e.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(s);r.onerror=function(e){n(e.target.error)},r.onsuccess=function(){t()}})})};A.prototype.ba=function(e,t){return t instanceof ServiceWorkerRegistration?"string"!=typeof e||0===e.length?Promise.reject(M.create(d.l)):x(this,e).then(function(n){if(0!==n.length){var r=n.findIndex(function(n){return t.scope===n.swScope&&e===n.fcmSenderId});if(-1!==r)return n[r]}}).then(function(e){if(e)return t.pushManager.getSubscription().catch(function(){throw M.create(d.H)}).then(function(t){var n;if((n=t)&&(n=t.endpoint===e.endpoint&&_(t.getKey("auth"))===e.auth&&_(t.getKey("p256dh"))===e.p256dh),n)return e.fcmToken})}):Promise.reject(M.create(d.m))},A.prototype.getSavedToken=A.prototype.ba,A.prototype.aa=function(e,t){var n=this;return"string"!=typeof e||0===e.length?Promise.reject(M.create(d.l)):t instanceof ServiceWorkerRegistration?t.pushManager.getSubscription().then(function(e){return e?e:t.pushManager.subscribe(v)}).then(function(r){return R(e,r).then(function(o){return W(n,e,t,r,o.token,o.pushSet).then(function(){return o.token})})}):Promise.reject(M.create(d.m))},A.prototype.createToken=A.prototype.aa,A.prototype.deleteToken=function(e){var t=this;return"string"!=typeof e||0===e.length?Promise.reject(M.create(d.J)):N(this,e).then(function(e){if(!e)throw M.create(d.D);return E(t).then(function(t){return new Promise(function(n,r){var o=t.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(e.swScope);o.onerror=function(e){r(e.target.error)},o.onsuccess=function(t){0===t.target.result?r(M.create(d.G)):n(e)}})})})};var L=function(e){var t=this;if(this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",y),!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw this.a.create(d.l);this.j=e.options.messagingSenderId,this.c=new A,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete}};L.prototype.getToken=function(){var e=this,t=Notification.permission;return"granted"!==t?"denied"===t?Promise.reject(this.a.create(d.L)):Promise.resolve(null):this.f().then(function(t){return e.c.ba(e.j,t).then(function(n){return n?n:e.c.aa(e.j,t)})})},L.prototype.getToken=L.prototype.getToken,L.prototype.deleteToken=function(e){var t=this;return this.c.deleteToken(e).then(function(){return t.f()}).then(function(e){return e?e.pushManager.getSubscription():null}).then(function(e){if(e)return e.unsubscribe()})},L.prototype.deleteToken=L.prototype.deleteToken,L.prototype.f=function(){throw this.a.create(d.U)},L.prototype.requestPermission=function(){throw this.a.create(d.i)},L.prototype.useServiceWorker=function(){throw this.a.create(d.i)},L.prototype.useServiceWorker=L.prototype.useServiceWorker,L.prototype.onMessage=function(){throw this.a.create(d.i)},L.prototype.onMessage=L.prototype.onMessage,L.prototype.onTokenRefresh=function(){throw this.a.create(d.i)},L.prototype.onTokenRefresh=L.prototype.onTokenRefresh,L.prototype.setBackgroundMessageHandler=function(){throw this.a.create(d.A)},L.prototype.setBackgroundMessageHandler=L.prototype.setBackgroundMessageHandler,L.prototype.delete=function(){I(this.c)};var O=self,F=function(e){var t=this;L.call(this,e),this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",y),O.addEventListener("push",function(e){return C(t,e)},!1),O.addEventListener("pushsubscriptionchange",function(e){return U(t,e)},!1),O.addEventListener("notificationclick",function(e){return B(t,e)},!1),this.b=null};e(F,L);var C=function(e,t){var n;try{n=t.data.json()}catch(e){return}var r=H().then(function(t){if(t){if(n.notification||e.b)return $(e,n)}else{if((t=n)&&"object"==typeof t.notification){var r=Object.assign({},t.notification),o={};r.data=(o.FCM_MSG=t,o),t=r}else t=void 0;if(t)return O.registration.showNotification(t.title||"",t);if(e.b)return e.b(n)}});t.waitUntil(r)},U=function(e,t){var n=e.getToken().then(function(t){if(!t)throw e.a.create(d.N);var n=e.c;return N(n,t).then(function(t){if(!t)throw e.a.create(d.K);return O.registration.pushManager.subscribe(v).then(function(e){return R(t.ha,e,t.ga)}).catch(function(r){return n.deleteToken(t.ia).then(function(){throw e.a.create(d.Y,{message:r})})})})});t.waitUntil(n)},B=function(e,t){if(t.notification&&t.notification.data&&t.notification.data.FCM_MSG){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data.FCM_MSG,r=n.notification.click_action;if(r){var o=K(r).then(function(e){return e?e:O.clients.openWindow(r)}).then(function(t){if(t)return delete n.notification,q(e,t,m(w.M,n))});t.waitUntil(o)}}};F.prototype.setBackgroundMessageHandler=function(e){if(e&&"function"!=typeof e)throw this.a.create(d.B);this.b=e},F.prototype.setBackgroundMessageHandler=F.prototype.setBackgroundMessageHandler;var K=function(e){var t=new URL(e).href;return O.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var n=null,r=0;r<e.length;r++)if(new URL(e[r].url).href===t){n=e[r];break}if(n)return n.focus(),n})},q=function(e,t,n){return new Promise(function(r,o){return t?(t.postMessage(n),void r()):o(e.a.create(d.P))})},H=function(){return O.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){return e.some(function(e){return"visible"===e.visibilityState})})},$=function(e,t){return O.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var r=m(w.T,t);return Promise.all(n.map(function(t){return q(e,t,r)}))})};F.prototype.f=function(){return Promise.resolve(O.registration)};var G=function(e){var t=this;L.call(this,e),this.h=null,this.o=firebase.INTERNAL.createSubscribe(function(e){t.h=e}),this.w=null,this.v=firebase.INTERNAL.createSubscribe(function(e){t.w=e}),V(this)};e(G,L),G.prototype.getToken=function(){var e=this;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?D(this).then(function(){return L.prototype.getToken.call(e)}):Promise.reject(this.a.create(d.Z))},G.prototype.getToken=G.prototype.getToken;var D=function(e){if(e.g)return e.g;var t=document.querySelector('link[rel="manifest"]');return t?e.g=fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.a.create(d.I)}):e.g=Promise.resolve(),e.g};G.prototype.requestPermission=function(){var e=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(t,n){var r=function(r){return"granted"===r?t():n("denied"===r?e.a.create(d.R):e.a.create(d.S))},o=Notification.requestPermission(function(e){o||r(e)});o&&o.then(r)})},G.prototype.requestPermission=G.prototype.requestPermission,G.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.a.create(d.m);if("undefined"!=typeof this.b)throw this.a.create(d.$);this.b=e},G.prototype.useServiceWorker=G.prototype.useServiceWorker,G.prototype.onMessage=function(e,t,n){return this.o(e,t,n)},G.prototype.onMessage=G.prototype.onMessage,G.prototype.onTokenRefresh=function(e,t,n){return this.v(e,t,n)},G.prototype.onTokenRefresh=G.prototype.onTokenRefresh;var Y=function(e,t){var n=t.installing||t.waiting||t.active;return new Promise(function(r,o){if(n)if("activated"===n.state)r(t);else if("redundant"===n.state)o(e.a.create(d.s));else{var i=function(){if("activated"===n.state)r(t);else{if("redundant"!==n.state)return;o(e.a.create(d.s))}n.removeEventListener("statechange",i)};n.addEventListener("statechange",i)}else o(e.a.create(d.O))})};G.prototype.f=function(){var e=this;return this.b?Y(this,this.b):(this.b=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw e.a.create(d.F,{browserErrorMessage:t.message})}).then(function(t){return Y(e,t).then(function(){return e.b=t,t.update(),t})}))};var V=function(e){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[b.u])switch(t=t.data,t[b.u]){case w.T:case w.M:e.h.next(t[b.C])}},!1)};if(!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(e){return self&&"ServiceWorkerGlobalScope"in self?new F(e):new G(e)},{Messaging:G})}();