<html><head><link rel="import" href="../bower_components/polymer/polymer.html">

</head><body><dom-module id="shop-gold-data">

  <script>!function(){var A=[{shopName:"ShopTestT",shopTitle:"ShopTestT",image:"/images/tkyo_yko_chba.jpg",placeholder:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAADAA4DASIAAhEBAxEB/8QAXAABAQEAAAAAAAAAAAAAAAAAAAIEAQEAAAAAAAAAAAAAAAAAAAACEAAAAwYHAQAAAAAAAAAAAAAAERMBAhIyYhQhkaEDIwUVNREBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A3dkr5e8tfpwuneJITOzIcmQpit037Bw4mnCVNOpAAQv/2Q=="},{shopName:"Mars",shopTitle:"Mars",image:"/images/mars.jpg",placeholder:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAADAA4DASIAAhEBAxEB/8QAWQABAQAAAAAAAAAAAAAAAAAAAAEBAQEAAAAAAAAAAAAAAAAAAAIDEAABAwMFAQAAAAAAAAAAAAARAAEygRIDIlITMwUVEQEBAAAAAAAAAAAAAAAAAAAAQf/aAAwDAQACEQMRAD8Avqn5meQ0kwk1UyclmLtNj7L4PQoioFf/2Q=="},{shopName:"Saturn",shopTitle:"Saturn",image:"/images/saturn.png",placeholder:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCAADAA4DASIAAhEBAxEB/8QAWQABAQAAAAAAAAAAAAAAAAAAAAEBAQEAAAAAAAAAAAAAAAAAAAIDEAABAwMFAQAAAAAAAAAAAAARAAEygRIDIlITMwUVEQEBAAAAAAAAAAAAAAAAAAAAQf/aAAwDAQACEQMRAD8Avqn5meQ0kwk1UyclmLtNj7L4PQoioFf/2Q=="}];Polymer({is:"shop-gold-data",properties:{shopName:String,itemName:String,shops:{type:Array,value:A,readOnly:!0,notify:!0},shop:{type:Object,computed:"_computeShop(shopName)",notify:!0},item:{type:Object,computed:"_computeItem(shop.items, itemName)",notify:!0},failure:{type:Boolean,notify:!0,readOnly:!0}},_getShopObject:function(A){for(var e,t=0;e=this.shops[t];++t)if(e.shopName===A)return e;return null},_computeShop:function(A){var e=this._getShopObject(A);return this._fetchItems(e,1),e},_computeItem:function(A,e){for(var t,s=0;t=A[s];++s)if(t.name===e)return t},_fetchItems:function(A,e){this._setFailure(!1),A&&!A.items&&this._getResource({url:"/data/"+A.shopName+".json",onLoad:function(A){this.set("shop.items",JSON.parse(A.target.responseText))},onError:function(A){this._setFailure(!0)}},e)},_getResource:function(A,e){var t=new XMLHttpRequest;t.addEventListener("load",A.onLoad.bind(this)),t.addEventListener("error",function(t){e>1?this.debounce("_getResource",this._getResource.bind(this,A,e-1),200):A.onError.call(this,t)}.bind(this)),t.open("GET",A.url),t.send()},refresh:function(){this.shopName&&this._fetchItems(this._getShopObject(this.shopName),3)}})}();</script>

</dom-module>
</body></html>