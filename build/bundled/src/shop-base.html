<html><head><meta charset="UTF-8"><link rel="import" href="shop-app.html"><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<style>
@charset "UTF-8";#firechat div,#firechat span,#firechat applet,#firechat object,#firechat iframe,#firechat h1,#firechat h2,#firechat h3,#firechat h4,#firechat h5,#firechat h6,#firechat p,#firechat blockquote,#firechat pre,#firechat a,#firechat abbr,#firechat acronym,#firechat address,#firechat big,#firechat cite,#firechat code,#firechat del,#firechat dfn,#firechat em,#firechat img,#firechat ins,#firechat kbd,#firechat q,#firechat s,#firechat samp,#firechat small,#firechat strike,#firechat strong,#firechat sub,#firechat sup,#firechat tt,#firechat var,#firechat b,#firechat u,#firechat i,#firechat center,#firechat dl,#firechat dt,#firechat dd,#firechat ol,#firechat ul,#firechat li,#firechat fieldset,#firechat form,#firechat label,#firechat legend,#firechat table,#firechat caption,#firechat tbody,#firechat tfoot,#firechat thead,#firechat tr,#firechat th,#firechat td,#firechat article,#firechat aside,#firechat canvas,#firechat details,#firechat embed,#firechat figure,#firechat figcaption,#firechat footer,#firechat header,#firechat hgroup,#firechat menu,#firechat nav,#firechat output,#firechat ruby,#firechat section,#firechat summary,#firechat time,#firechat mark,#firechat audio,#firechat video{border:0;font-size:12px;font-family:arial,helvetica,sans-serif;vertical-align:baseline;margin:0;padding:0;}#firechat article,#firechat aside,#firechat details,#firechat figcaption,#firechat figure,#firechat footer,#firechat header,#firechat hgroup,#firechat menu,#firechat nav,#firechat section{display:block;}#firechat body{line-height:1;}#firechat ol,#firechat ul{list-style:none;}#firechat blockquote,#firechat q{quotes:none;}#firechat blockquote:before,#firechat blockquote:after,#firechat q:before,#firechat q:after{content:none;}#firechat table{border-collapse:collapse;border-spacing:0;}.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}.clearfix:after{clear:both;}#firechat{color:#333;text-align:left;}#firechat .center{float:none!important;margin-left:auto!important;margin-right:auto!important;}#firechat .left{float:left!important;}#firechat .right{float:right!important;}#firechat .alignleft{text-align:left!important;}#firechat .alignright{text-align:right!important;}#firechat .aligncenter{text-align:center!important;}#firechat .hidden{display:none!important;}#firechat .row{clear:both;}#firechat .fifth,#firechat .fivesixth,#firechat .fourfifth,#firechat .half,#firechat .ninetenth,#firechat .quarter,#firechat .sevententh,#firechat .sixth,#firechat .tenth,#firechat .third,#firechat .threefifth,#firechat .threequarter,#firechat .threetenth,#firechat .twofifth,#firechat .twothird,#firechat .full{margin-left:2.127659574468085%;float:left;min-height:1px;}#firechat .fifth:first-child,#firechat .fivesixth:first-child,#firechat .fourfifth:first-child,#firechat .half:first-child,#firechat .ninetenth:first-child,#firechat .quarter:first-child,#firechat .sevententh:first-child,#firechat .sixth:first-child,#firechat .tenth:first-child,#firechat .third:first-child,#firechat .threefifth:first-child,#firechat .threequarter:first-child,#firechat .threetenth:first-child,#firechat .twofifth:first-child,#firechat .twothird:first-child,#firechat .full:first-child{margin-left:0;}#firechat .tenth{width:8.08510638297872%;}#firechat .sixth{width:14.893617021276595%;}#firechat .fifth{width:18.297872340425535%;}#firechat .quarter{width:23.404255319148938%;}#firechat .threetenth{width:26.3829787235%;}#firechat .third{width:31.914893617021278%;}#firechat .twofifth{width:38.72340425531915%;}#firechat .half{width:48.93617021276596%;}#firechat .sevententh{width:58.7234042555%;}#firechat .threefifth{width:59.14893617021278%;}#firechat .twothird{width:65.95744680851064%;}#firechat .threequarter{width:74.46808510638297%;}#firechat .ninetenth{width:74.8936170215%;}#firechat .fourfifth{width:79.57446808510639%;}#firechat .fivesixth{width:82.9787234042553%;}#firechat .full{width:100%;}#firechat .clipped{overflow:hidden;}#firechat strong{font-weight:bold;}#firechat em{font-style:italic;}#firechat label{display:block;}#firechat a{color:#005580;}#firechat a:visited,#firechat a:hover,#firechat a:active{color:#005580;}#firechat p{margin:10px 0;}#firechat h1,#firechat h2,#firechat h3,#firechat h4,#firechat h5,#firechat h6{margin:10px 0;font-family:inherit;font-weight:bold;line-height:20px;color:inherit;}#firechat h1,#firechat h2,#firechat h3{line-height:40px;}#firechat h1{font-size:38.5px;}#firechat h2{font-size:31.5px;}#firechat h3{font-size:24.5px;}#firechat h4{font-size:17.5px;}#firechat h5{font-size:14px;}#firechat h6{font-size:11.9px;}#firechat small{font-size:90%;}#firechat .nav{list-style:none;}#firechat .nav>li>a{display:block;background-color:#eee;text-decoration:none;overflow:hidden;white-space:nowrap;}#firechat .nav>li>a:hover,#firechat .nav>li>a:focus{background-color:#fff;}#firechat .nav-tabs{border-bottom:1px solid #ddd;clear:both;}#firechat .nav-tabs>li{float:left;margin-bottom:-1px;max-width:45%;}#firechat .nav-tabs>li>a{-webkit-border-top-right-radius:4px;-webkit-border-bottom-right-radius:0;-webkit-border-bottom-left-radius:0;-webkit-border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:0;-moz-border-radius-bottomleft:0;-moz-border-radius-topleft:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:4px;padding:4px 8px;margin-right:2px;line-height:20px;border:1px solid transparent;border-color:#ccc;}#firechat .nav-tabs>.active>a,#firechat .nav-tabs>.active>a:hover,#firechat .nav-tabs>.active>a:focus{border-bottom-color:transparent;background-color:#fff;cursor:default;}#firechat .tab-content{overflow:auto;}#firechat .tab-content>.tab-pane{display:none;}#firechat .tab-content>.active{display:block;background-color:#fff;}#firechat .caret{display:inline-block;width:0;height:0;vertical-align:top;border-top:4px solid #000;border-right:4px solid transparent;border-left:4px solid transparent;content:"";margin-top:8px;margin-left:2px;}#firechat .firechat-dropdown{position:relative;}#firechat .firechat-dropdown-toggle{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none;}#firechat .firechat-dropdown-toggle:focus,#firechat .firechat-dropdown-toggle:active{outline:0;text-decoration:none;}#firechat .firechat-dropdown-toggle.btn{padding:4px 0 0;height:22px;}#firechat .firechat-dropdown-menu{*zoom:1;-webkit-border-top-right-radius:0;-webkit-border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;-webkit-border-top-left-radius:0;-moz-border-radius-topright:0;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:0;border-top-right-radius:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-top-left-radius:0;z-index:1000;display:none;float:left;position:absolute;top:100%;left:0;width:100%;background-color:#fff;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box;border:1px solid #ccc;min-width:98%;padding:0;margin:-1px 0 0;}#firechat .firechat-dropdown-menu:before,#firechat .firechat-dropdown-menu:after{display:table;content:"";line-height:0;}#firechat .firechat-dropdown-menu:after{clear:both;}#firechat .firechat-dropdown-menu ul{background-color:#fff;list-style:none;overflow-y:scroll;max-height:300px;}#firechat .firechat-dropdown-menu ul>li>a{display:block;padding:1px 1px 1px 3px;clear:both;font-weight:normal;line-height:20px;color:#333;white-space:nowrap;}#firechat .firechat-dropdown-menu ul>li>a.highlight{background-color:#d9edf7;}#firechat .firechat-dropdown-menu ul>li>a:hover,#firechat .firechat-dropdown-menu ul>li>a:focus,#firechat .firechat-dropdown-menu ul>.active>a,#firechat .firechat-dropdown-menu ul>.active>a:hover,#firechat .firechat-dropdown-menu ul>.active>a:focus{text-decoration:none;color:#000;background-color:#d9edf7;outline:0;}#firechat .firechat-dropdown-menu ul>.disabled>a,#firechat .firechat-dropdown-menu ul>.disabled>a:hover,#firechat .firechat-dropdown-menu ul>.disabled>a:focus{color:#999;text-decoration:none;background-color:transparent;background-image:none;cursor:default;}#firechat .firechat-dropdown-header{position:relative;width:100%;padding:10px 0;background-color:#eee;border-bottom:1px solid #ccc;}#firechat .firechat-dropdown-footer{position:relative;width:100%;padding:10px 0;background-color:#eee;border-top:1px solid #ccc;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}#firechat .open{*z-index:1000;}#firechat .open>.firechat-dropdown-menu{display:block;border:1px solid #ccc;-webkit-border-top-right-radius:0;-webkit-border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;-webkit-border-top-left-radius:0;-moz-border-radius-topright:0;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:0;border-top-right-radius:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-top-left-radius:0;}#firechat .open>.firechat-dropdown-toggle{outline:0;text-decoration:none;-webkit-border-top-right-radius:4px;-webkit-border-bottom-right-radius:0;-webkit-border-bottom-left-radius:0;-webkit-border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:0;-moz-border-radius-bottomleft:0;-moz-border-radius-topleft:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:4px;}#firechat .prompt-wrapper{position:absolute;z-index:1000;}#firechat .prompt{position:absolute;z-index:1001;background-color:#fff;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.45);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.45);box-shadow:0 5px 10px rgba(0,0,0,0.45);}#firechat .prompt-header{padding:4px 8px;font-weight:bold;background-color:#eee;border:1px solid #ccc;-webkit-border-top-right-radius:4px;-webkit-border-bottom-right-radius:0;-webkit-border-bottom-left-radius:0;-webkit-border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:0;-moz-border-radius-bottomleft:0;-moz-border-radius-topleft:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:4px;}#firechat .prompt-header a.close{opacity:.6;font-size:13px;margin-top:2px;}#firechat .prompt-header a.close:hover{opacity:.9;}#firechat .prompt-body{background-color:#fff;padding:4px 8px;border-left:1px solid #ccc;border-right:1px solid #ccc;}#firechat .prompt-footer{padding:4px 8px;background-color:#eee;border:1px solid #ccc;-webkit-border-top-right-radius:0;-webkit-border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;-webkit-border-top-left-radius:0;-moz-border-radius-topright:0;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:0;border-top-right-radius:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-top-left-radius:0;}#firechat .prompt-background{background-color:#333;border:1px solid #333;opacity:.8;z-index:1000;height:100%;width:100%;}#firechat .btn{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;height:24px;display:inline-block;*display:inline;*zoom:1;padding:2px 5px;margin-bottom:0;text-align:center;vertical-align:middle;cursor:pointer;color:#333;font-size:12px;text-shadow:0 1px 1px rgba(255,255,255,0.75);background-color:#f5f5f5;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);*background-color:#e6e6e6;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);border:1px solid #ccc;*border:0;border-bottom-color:#b3b3b3;*margin-left:.3em;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);}#firechat .btn:hover,#firechat .btn:focus,#firechat .btn:active,#firechat .btn.active,#firechat .btn.disabled,#firechat .btn[disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9;outline:0;}#firechat .btn:active,#firechat .btn.active{background-color:#ccc;}#firechat .btn:first-child{*margin-left:0;}#firechat .btn:hover,#firechat .btn:focus{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear;}#firechat .btn.active,#firechat .btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);}#firechat .btn.disabled,#firechat .btn[disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);}#firechat .btn.disabled:active,#firechat .btn[disabled]:active{-webkit-box-shadow:inherit;-moz-box-shadow:inherit;box-shadow:inherit;background-color:#e6e6e6;}#firechat .contextmenu{position:fixed;z-index:1001;min-width:150px;border:1px solid #ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}#firechat .contextmenu ul{background-color:#fff;list-style:none;}#firechat .contextmenu ul>li>a{display:block;padding:3px 10px;clear:both;font-weight:normal;line-height:20px;color:#333;white-space:nowrap;}#firechat .contextmenu ul>li>a.highlight{background-color:#d9edf7;}#firechat .contextmenu ul>li>a:hover,#firechat .contextmenu ul>li>a:focus{text-decoration:none;color:#fff;background-color:#0081c2;outline:0;}#firechat{padding:0;font-family:sans-serif;font-size:12px;line-height:18px;}#firechat input,#firechat textarea{width:100%;font-family:sans-serif;font-size:12px;line-height:18px;padding:2px 5px;border:1px solid #ccc;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}#firechat input:-moz-placeholder,#firechat textarea:-moz-placeholder{color:#aaa;}#firechat input:-ms-input-placeholder,#firechat textarea:-ms-input-placeholder{color:#aaa;}#firechat input::-webkit-input-placeholder,#firechat textarea::-webkit-input-placeholder{color:#aaa;}#firechat input[disabled],#firechat textarea[disabled]{background-color:#eee;}#firechat input{height:24px;}#firechat textarea{resize:none;height:40px;}#firechat .search-wrapper{-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;border:1px solid #ccc;margin:0 5px;padding:2px 5px;background:#fff;}#firechat .search-wrapper>input[type=text]{padding-left:0;border:0;}#firechat .search-wrapper>input[type=text]:focus,#firechat .search-wrapper>input[type=text]:active{outline:0;}#firechat .chat{overflow:auto;-ms-overflow-x:hidden;overflow-x:hidden;height:290px;position:relative;margin-bottom:5px;border:1px solid #ccc;border-top:0;overflow-y:scroll;}#firechat .chat textarea{overflow:auto;vertical-align:top;}#firechat .message{color:#333;padding:3px 5px;border-bottom:1px solid #ccc;}#firechat .message.highlighted{background-color:#d9edf7;}#firechat .message .name{font-weight:bold;overflow-x:hidden;}#firechat .message.message-self{color:#2675ab;}#firechat .message:nth-child(odd){background-color:#f9f9f9;}#firechat .message:nth-child(odd).highlighted{background-color:#d9edf7;}#firechat .message:nth-child(odd).message-local{background-color:#effafc;}#firechat .message-content{word-wrap:break-word;padding-right:45px;}#firechat .message-content.red{color:red;}#firechat .message.message-notification .message-content{font-style:italic;}#firechat ul::-webkit-scrollbar{-webkit-appearance:none;width:7px;}#firechat ul::-webkit-scrollbar-thumb{border-radius:4px;-webkit-box-shadow:0 0 1px rgba(255,255,255,0.5);}#firechat #firechat-header{padding:6px 0 0 0;height:40px;}#firechat #firechat-tabs{height:435px;}#firechat #firechat-tab-list{background-color:#fff;}#firechat #firechat-tab-content{width:100%;background-color:#fff;}#firechat .tab-pane-menu{border:1px solid #ccc;border-top:0;vertical-align:middle;padding-bottom:5px;}#firechat .tab-pane-menu .firechat-dropdown{margin:5px 0 0 5px;}#firechat .tab-pane-menu>.icon{margin:5px 2px 0;}#firechat .icon{display:inline-block;*margin-right:.3em;line-height:20px;vertical-align:middle;background-repeat:no-repeat;padding:0;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL8AAAANEAYAAACoeGM7AAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAM80lEQVR42t2cZ4xWRRfHZ3dhwbK7CJZYYiOxV+wlUQzCKmBBsWPvYjQiaiyxYUwULLErltgrNpRF4q5iV0BRLFE0diUi7LIq6Pqw74f//rzO4Zm9d+5z9c37ni//3OfemXtm5sypc58q55xzrrpauHSpcOONheedJ9x9d2Hv3sLvvxfefbfw5puFf/5Zvr+8VFUl7Ozs/rkNNxTef79w222F77wjPOoo4ccfF/O+UDvGzTVEf8wH1zU1wlJJePTRwv33Fx57rPDnn/1+wbzzG+IXvrhmPUPzY/kJEc/HzqslK1fLLy8cMUK4667CFVYQ/vqr8PXXhU884f8eL6eXXKJ2wqSd3tDY2KOHc84NGqSRnnCC7tbVCdvbhRMnasWnTdt5Z+eca2pK6797Yh6ef1641lrCPfYQfv21UNwl62qv115b2Nws/PZb4d57C3/7LftalaOQ/C63nPCII4Tsg6228scHffqp8LHHhPfe6/8eu49feEH44YfCq64S/v67cMGC7tuvu65w6FDhllsKkS/0zoQJaZzMmSO+JaEzZmgkY8b88Ydzzs2b19HhnHNffSWJ6tVLM1cq/fKLrjXiUaPUrn9/XZ9yip6rqVmyxDnnnnrKvPbAA4V6TTJxP/zgT4zdyC+9JOzXz++PgceSVSS1tUJtE+c22si/f+21Pj9Wwd54o//8ZpsJd9xR2KtX9+8vmkLzcsABPt9z5wr32af88xiOf4oaGoSHH17M+/LKg203aJDwiy+EVh5DyHzuuWcxfDn31lvOOffMM7Nn6z1SsZ2dn30m/OQT4eefC7/8UvjBB0LaVzav7D873vfeE6LQISvv3Of50P6OJetgWFp5ZeFzz5V/b1bEEd1333x80g+O4mWXCXEQMDB33CG8/XYhBhuDmMZnOn30kZ5/+23nnGtpefNN55wbP96Xl/nzhYsWCdvauEbeQP1Of6US/XRZfDz8Bx8U9uwpPPFE4eOPC/EMVl9dOG6ccORI4Q03CA87LHbA5RcCwgO47TbhokXCYcOERCKQ7GJiMLiPokeQ2QCjRwtvukkY6zHg0V10kXDAAH++EIz77hM++aRwxRWFq64q3H57v9/+/YVPPy2cOFF47rnCNE8kll/Gi4eIAWU9v/vOnz8MA4qjb18hG51+2JiLF+ebX/hA4U+b5t+/7jrhAw8IkQ88WvnPiZzi4Q0eXL6/dEJhawaGDydmk4uEQmhu1kj79tVImb8RI8TZwIG0p78ddnAubOhDhIcPIXd4nnh4OHYYzPXXF7K/ed5GBLb/NLKRFOtMfyCZAiIKns8aSVp9xP4i8nv//Ti+icjgl0iDeUsjpKDSyJYeqqs1A+3taDBpkn79Qi5YW9vf5wXq0YP+1L5U6loAUjpW4WPhQhN00EFC2SXnDj1UiAF44w2hTWnEEqkcCIWJYkShQNbDIIJZZx2h9Xhs/7EpFDwCNs6UKf584tGQsiFCGTJEuMEG/jxBzBe/H3+8cJddhBiAZ58thl/eM2uW8MgjhWyAyy8XojhRUGuuKayvF7Jhf/pJ+O67wltvFU6dGscv78fTgg45RPjII+XbYZA23bT8/Vtu8ecBDy9MpHS0EROFr1B76lQp7r32su20EwYMkGSOG4dq4I0a4fDh9G9TQN0TKR0iB8aD3G+9tRDHDoPPenKf53GYiABiPWm7f046SUgKDs8aQwxlVfiQTVXh0BChxir+kDol5WPv24im+Ahcb6iu9jVnR4euGX9oXsLj7GKYHP68eUI8ANsRA7WKE8sNkUopdvgJsW0QUBbc3oewl6GQs9LUDgr85JOF5OZHjRKyESZNEp55ppBIC7IbxgoSkQzt2OgXX1wMv9RCFBAuG4HgSREKU0vB42Jjo6gxtPvtJ8TzTM91+kQOf731hHj4KHybA0bRK8B1bpNNhAqkE8OH40CKLZ3I4a+0kq6l8JuapPAbGx991Lm/r5s8+aFDlWOdOVMuS0ODNm5bm1RWSwsSrJY2FZVGRFYYYgwt+wO5EpeJ4eaa+zxPexQ+/Wcl+iFCxeBvs43QRujW048lu09Y16KI/m3Ewu8h/VS55w/5b7AGMrbW5lyXImQh8EhtqGBDGOu525QDnm5RhOcBzZ8vfO01IYIaev/Mmf5zpALsfSiv5bYLfeqpQhSUrYHY92GYbD+shx0XKSOKlrFk1xHFTQRon7M1FNtepaOErwsvFBIqkzKKlQ8MDoTnCpFKwyCi2FZbTYhDgydO6gfaaaesnFC0xQcUUQwlBi6VpPCHDJGKmDyZGWMldY2nPmmSP5NEdlkJRYSCZr7FRbiIzTX3eZ72tiiclZjf444rzyd6hkid9+fNCNhxvfJKvn5C/YVy9nZVYw89ZCdfI6TVEuCLCI4Zhp+Ojq6FIAdLFR0PjpQOFpyFsQMidw5ZxRo7ATaEI6fMgFD8FJsxXCgee00qSiWPJNfKaYLp08u/P1YQ4ZfxWgWDAcOjZmMR8G+3nZBTPbwffhYuFJ5zjhCPKi9ZBUzkh8dpBTkk2KSKLr1UiAIJEYYhK2GQIOto4OGj8NdYQ4hck8tnvkmtQSGDHKK6On8nUNtIPHwUvp05SeSwYTI1s2YpJhk5kliO/uP4Qe6IxMnhk9JhXqyCtQ4Oz9Oe/nwzl05EtJbI5fMeTs8QscIP+zwtEuA+csz+fvjhOH5tf6SSoZCjEipeKw5MVj12PemZ9tXVvunt2dOuHE+K06oqvbG2lp2ikS1ZIknv3burO45lXn+9kKItOfzQwhO6jR0r5PiXPaUQmzNHkMllIyhMMBudmgKnjqxnwnSssooQhWpTLOR6UVwc/4ul1lYhx7rwRBF4PBEEwxLFavhkeTmmN2aMEAG3ghdrqHx149z555efx9DGY37vvFNoPcxQe1v0SyObe8cRIYf/4otCPHwUPsVge4yXWgTEumWl9nZtsPp6irbk8OVyTJ5sYyRJdGOjkitJjUP3FyzwNzIOV1ZivdinFG3J4dt5twqW9eJ5nUFKDIB1xNIIh8p6oijUa64RcnyT2SLSJHWXdtqKcdD/BRcIifBiCf44TIGe2WILYaiGhWHFoaFGxnxtvnlWDvwZY/yLF6toy+8LF2rGamrESXK8WRIwe7YcjKYmzdD06Xpi7lzFWqR4/1pYeywMT5ncL4rpiiuE9tgnIRyeozP9ZyVSBNZyskHxpFFUCGroOCf36Zf28MtzRCqxOXPaM24iJxsJQQgOCgyiqM4GJvduKZRbjOWXXH+fPkKKiUQmOnyYRBrwZeeXCIxxQ/mPSfpEkZn3KZO+7PHiH38U2mKurQHY478ooHSSaZswgWOZum5uFra2iqPOTs0g93EE4NzWAKZM4RioIoDx4/PNE4YQxWNTs6HUgL1Pe3sMNCuF9qOVG2penIPHYOHokcJ8+WVhS4sQR4NaJP3F7luI9tSALBFxovhBW6uonFSORm7mzMEAzJjhnHMNDdLI9fXgq68651xdnZLYffpY+cpIhLzkUNNySd98I7QKFPs0cGC+4dv3sCAYIE4bhXJboWvwrruExxwjJPWStyjD8/b0AyEiCt4Wh6xBpCi+225CG5kUdWogxC/HMyldshGJ7IhcWIfTTxciLxhWqKgcJxuPc/h2nTAAaYrq4IP9dni01jCEiVM3nIdWdaizUxuTDdvaSgQQ6kfPNTVhKPgOgP7j5id0Dh9DbR05Unlch54PfQeQRuyrUM7ZOoxkCq6+WkikhiOBIQ/JEx7sGWfE8QlZOYKyOi7sS+uQgdn3ra/4LT/ZSS1razEEfBgoOf0rdRUaIB4rXyCedpqQFAu5KzxdPyBJPPRlj7d1Tw89JLznHiGeb+hDFVIWIQPll9SS3ynKUUwj5RWbI6Q/inWVEgJsUxRFKdKi+T3rLKEtshf9IZytPdgIgNM75PA5dWQ9fBAFE0+cu+dDGQyAHwGMHi0P/sordT12LB4+Ct//0Cbvh1zWINr9gAePIYe4thGCbU//sYRHn/fDLBwyawhDOfe8ESbvCx3/zHuKJp5Cil8cVlVlxcjXhv5yICvh4aPwreDlJY5nUay1Cj2rINn2lD4qPX6KwcPzRQHhKeP5WeQ+ng2nSyhCcv4fKip1EuIXRQlfXIMUn7nPl9SkhKhFFM2v7QcDEIoAQoiHbxV+5V/uEgGQAuJLXRQ7X/KS0sHD///8cpcIl/P69MN3GDh2RBzUvvjLFVI2NuK1einty+CsZDMY/z0qyuOvkGwIY8+zMuE2ZYGHj8JHUWQlm/sm1ENRZ81dWrShLEVAy1/20F9EEZrTQnk9HJCNYL+YLMrD+F/jF7IbnBQQNQDOi/MFJ9fk8O26xisMQmb7OykaagD+p/RLl3JNDj+U0gn13z0xLhQ0BtEqfLtP7TXP057+YvcDCpvDInwvYInUcnIqqjLKK2/IydlnF8NHfvq3FP9/ANgTCJ9z9ZF7AAAAAElFTkSuQmCC") no-repeat top left;opacity:.3;font-size:22px;font-family:Arial;font-weight:bold;overflow:hidden;}#firechat .icon.plus{margin-top:0;vertical-align:top;background:transparent;}#firechat .icon.search{background-position:0 0;width:13px;height:13px;}#firechat .icon.close{background-position:-120px 0;width:13px;height:13px;}#firechat .icon.user-chat{background-position:-138px 0;width:17px;height:13px;}#firechat .icon.user-group{background-position:-18px 0;width:17px;height:13px;}#firechat .icon.user-mute{background-position:-84px 0;width:13px;height:13px;}#firechat .icon.user-mute.red{background-position:-102px 0;width:13px;height:13px;}#firechat .icon:hover,#firechat .btn:hover>.icon{opacity:.6;}#firechat a>.icon{margin:3px 1px;}
</style>
<script>(function(){var e=this,t=e._,n=Array.prototype,a=Object.prototype,r=Function.prototype,i=n.push,s=n.slice,o=n.concat,c=a.toString,l=a.hasOwnProperty,u=Array.isArray,h=Object.keys,f=r.bind,d=function(e){return e instanceof d?e:this instanceof d?void(this._wrapped=e):new d(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):e._=d,d.VERSION="1.7.0";var p=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)};case 4:return function(n,a,r,i){return e.call(t,n,a,r,i)}}return function(){return e.apply(t,arguments)}};d.iteratee=function(e,t,n){return null==e?d.identity:d.isFunction(e)?p(e,t,n):d.isObject(e)?d.matches(e):d.property(e)},d.each=d.forEach=function(e,t,n){if(null==e)return e;t=p(t,n);var a,r=e.length;if(r===+r)for(a=0;r>a;a++)t(e[a],a,e);else{var i=d.keys(e);for(a=0,r=i.length;r>a;a++)t(e[i[a]],i[a],e)}return e},d.map=d.collect=function(e,t,n){if(null==e)return[];t=d.iteratee(t,n);for(var a,r=e.length!==+e.length&&d.keys(e),i=(r||e).length,s=Array(i),o=0;i>o;o++)a=r?r[o]:o,s[o]=t(e[a],a,e);return s};var m="Reduce of empty array with no initial value";d.reduce=d.foldl=d.inject=function(e,t,n,a){null==e&&(e=[]),t=p(t,a,4);var r,i=e.length!==+e.length&&d.keys(e),s=(i||e).length,o=0;if(arguments.length<3){if(!s)throw new TypeError(m);n=e[i?i[o++]:o++]}for(;s>o;o++)r=i?i[o]:o,n=t(n,e[r],r,e);return n},d.reduceRight=d.foldr=function(e,t,n,a){null==e&&(e=[]),t=p(t,a,4);var r,i=e.length!==+e.length&&d.keys(e),s=(i||e).length;if(arguments.length<3){if(!s)throw new TypeError(m);n=e[i?i[--s]:--s]}for(;s--;)r=i?i[s]:s,n=t(n,e[r],r,e);return n},d.find=d.detect=function(e,t,n){var a;return t=d.iteratee(t,n),d.some(e,function(e,n,r){return t(e,n,r)?(a=e,!0):void 0}),a},d.filter=d.select=function(e,t,n){var a=[];return null==e?a:(t=d.iteratee(t,n),d.each(e,function(e,n,r){t(e,n,r)&&a.push(e)}),a)},d.reject=function(e,t,n){return d.filter(e,d.negate(d.iteratee(t)),n)},d.every=d.all=function(e,t,n){if(null==e)return!0;t=d.iteratee(t,n);var a,r,i=e.length!==+e.length&&d.keys(e),s=(i||e).length;for(a=0;s>a;a++)if(r=i?i[a]:a,!t(e[r],r,e))return!1;return!0},d.some=d.any=function(e,t,n){if(null==e)return!1;t=d.iteratee(t,n);var a,r,i=e.length!==+e.length&&d.keys(e),s=(i||e).length;for(a=0;s>a;a++)if(r=i?i[a]:a,t(e[r],r,e))return!0;return!1},d.contains=d.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=d.values(e)),d.indexOf(e,t)>=0)},d.invoke=function(e,t){var n=s.call(arguments,2),a=d.isFunction(t);return d.map(e,function(e){return(a?t:e[t]).apply(e,n)})},d.pluck=function(e,t){return d.map(e,d.property(t))},d.where=function(e,t){return d.filter(e,d.matches(t))},d.findWhere=function(e,t){return d.find(e,d.matches(t))},d.max=function(e,t,n){var a,r,i=-1/0,s=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:d.values(e);for(var o=0,c=e.length;c>o;o++)a=e[o],a>i&&(i=a)}else t=d.iteratee(t,n),d.each(e,function(e,n,a){r=t(e,n,a),(r>s||r===-1/0&&i===-1/0)&&(i=e,s=r)});return i},d.min=function(e,t,n){var a,r,i=1/0,s=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:d.values(e);for(var o=0,c=e.length;c>o;o++)a=e[o],i>a&&(i=a)}else t=d.iteratee(t,n),d.each(e,function(e,n,a){r=t(e,n,a),(s>r||1/0===r&&1/0===i)&&(i=e,s=r)});return i},d.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:d.values(e),a=n.length,r=Array(a),i=0;a>i;i++)t=d.random(0,i),t!==i&&(r[i]=r[t]),r[t]=n[i];return r},d.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=d.values(e)),e[d.random(e.length-1)]):d.shuffle(e).slice(0,Math.max(0,t))},d.sortBy=function(e,t,n){return t=d.iteratee(t,n),d.pluck(d.map(e,function(e,n,a){return{value:e,index:n,criteria:t(e,n,a)}}).sort(function(e,t){var n=e.criteria,a=t.criteria;if(n!==a){if(n>a||void 0===n)return 1;if(a>n||void 0===a)return-1}return e.index-t.index}),"value")};var _=function(e){return function(t,n,a){var r={};return n=d.iteratee(n,a),d.each(t,function(a,i){var s=n(a,i,t);e(r,a,s)}),r}};d.groupBy=_(function(e,t,n){d.has(e,n)?e[n].push(t):e[n]=[t]}),d.indexBy=_(function(e,t,n){e[n]=t}),d.countBy=_(function(e,t,n){d.has(e,n)?e[n]++:e[n]=1}),d.sortedIndex=function(e,t,n,a){n=d.iteratee(n,a,1);for(var r=n(t),i=0,s=e.length;s>i;){var o=i+s>>>1;n(e[o])<r?i=o+1:s=o}return i},d.toArray=function(e){return e?d.isArray(e)?s.call(e):e.length===+e.length?d.map(e,d.identity):d.values(e):[]},d.size=function(e){return null==e?0:e.length===+e.length?e.length:d.keys(e).length},d.partition=function(e,t,n){t=d.iteratee(t,n);var a=[],r=[];return d.each(e,function(e,n,i){(t(e,n,i)?a:r).push(e)}),[a,r]},d.first=d.head=d.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:s.call(e,0,t)},d.initial=function(e,t,n){return s.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},d.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},d.rest=d.tail=d.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},d.compact=function(e){return d.filter(e,d.identity)};var v=function(e,t,n,a){if(t&&d.every(e,d.isArray))return o.apply(a,e);for(var r=0,s=e.length;s>r;r++){var c=e[r];d.isArray(c)||d.isArguments(c)?t?i.apply(a,c):v(c,t,n,a):n||a.push(c)}return a};d.flatten=function(e,t){return v(e,t,!1,[])},d.without=function(e){return d.difference(e,s.call(arguments,1))},d.uniq=d.unique=function(e,t,n,a){if(null==e)return[];d.isBoolean(t)||(a=n,n=t,t=!1),null!=n&&(n=d.iteratee(n,a));for(var r=[],i=[],s=0,o=e.length;o>s;s++){var c=e[s];if(t)s&&i===c||r.push(c),i=c;else if(n){var l=n(c,s,e);d.indexOf(i,l)<0&&(i.push(l),r.push(c))}else d.indexOf(r,c)<0&&r.push(c)}return r},d.union=function(){return d.uniq(v(arguments,!0,!0,[]))},d.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,a=0,r=e.length;r>a;a++){var i=e[a];if(!d.contains(t,i)){for(var s=1;n>s&&d.contains(arguments[s],i);s++);s===n&&t.push(i)}}return t},d.difference=function(e){var t=v(s.call(arguments,1),!0,!0,[]);return d.filter(e,function(e){return!d.contains(t,e)})},d.zip=function(e){if(null==e)return[];for(var t=d.max(arguments,"length").length,n=Array(t),a=0;t>a;a++)n[a]=d.pluck(arguments,a);return n},d.object=function(e,t){if(null==e)return{};for(var n={},a=0,r=e.length;r>a;a++)t?n[e[a]]=t[a]:n[e[a][0]]=e[a][1];return n},d.indexOf=function(e,t,n){if(null==e)return-1;var a=0,r=e.length;if(n){if("number"!=typeof n)return a=d.sortedIndex(e,t),e[a]===t?a:-1;a=0>n?Math.max(0,r+n):n}for(;r>a;a++)if(e[a]===t)return a;return-1},d.lastIndexOf=function(e,t,n){if(null==e)return-1;var a=e.length;for("number"==typeof n&&(a=0>n?a+n+1:Math.min(a,n+1));--a>=0;)if(e[a]===t)return a;return-1},d.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var a=Math.max(Math.ceil((t-e)/n),0),r=Array(a),i=0;a>i;i++,e+=n)r[i]=e;return r};var g=function(){};d.bind=function(e,t){var n,a;if(f&&e.bind===f)return f.apply(e,s.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");return n=s.call(arguments,2),a=function(){if(!(this instanceof a))return e.apply(t,n.concat(s.call(arguments)));g.prototype=e.prototype;var r=new g;g.prototype=null;var i=e.apply(r,n.concat(s.call(arguments)));return d.isObject(i)?i:r}},d.partial=function(e){var t=s.call(arguments,1);return function(){for(var n=0,a=t.slice(),r=0,i=a.length;i>r;r++)a[r]===d&&(a[r]=arguments[n++]);for(;n<arguments.length;)a.push(arguments[n++]);return e.apply(this,a)}},d.bindAll=function(e){var t,n,a=arguments.length;if(1>=a)throw new Error("bindAll must be passed function names");for(t=1;a>t;t++)n=arguments[t],e[n]=d.bind(e[n],e);return e},d.memoize=function(e,t){var n=function(a){var r=n.cache,i=t?t.apply(this,arguments):a;return d.has(r,i)||(r[i]=e.apply(this,arguments)),r[i]};return n.cache={},n},d.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},d.defer=function(e){return d.delay.apply(d,[e,1].concat(s.call(arguments,1)))},d.throttle=function(e,t,n){var a,r,i,s=null,o=0;n||(n={});var c=function(){o=n.leading===!1?0:d.now(),s=null,i=e.apply(a,r),s||(a=r=null)};return function(){var l=d.now();o||n.leading!==!1||(o=l);var u=t-(l-o);return a=this,r=arguments,0>=u||u>t?(clearTimeout(s),s=null,o=l,i=e.apply(a,r),s||(a=r=null)):s||n.trailing===!1||(s=setTimeout(c,u)),i}},d.debounce=function(e,t,n){var a,r,i,s,o,c=function(){var l=d.now()-s;t>l&&l>0?a=setTimeout(c,t-l):(a=null,n||(o=e.apply(i,r),a||(i=r=null)))};return function(){i=this,r=arguments,s=d.now();var l=n&&!a;return a||(a=setTimeout(c,t)),l&&(o=e.apply(i,r),i=r=null),o}},d.wrap=function(e,t){return d.partial(t,e)},d.negate=function(e){return function(){return!e.apply(this,arguments)}},d.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,a=e[t].apply(this,arguments);n--;)a=e[n].call(this,a);return a}},d.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},d.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},d.once=d.partial(d.before,2),d.keys=function(e){if(!d.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)d.has(e,n)&&t.push(n);return t},d.values=function(e){for(var t=d.keys(e),n=t.length,a=Array(n),r=0;n>r;r++)a[r]=e[t[r]];return a},d.pairs=function(e){for(var t=d.keys(e),n=t.length,a=Array(n),r=0;n>r;r++)a[r]=[t[r],e[t[r]]];return a},d.invert=function(e){for(var t={},n=d.keys(e),a=0,r=n.length;r>a;a++)t[e[n[a]]]=n[a];return t},d.functions=d.methods=function(e){var t=[];for(var n in e)d.isFunction(e[n])&&t.push(n);return t.sort()},d.extend=function(e){if(!d.isObject(e))return e;for(var t,n,a=1,r=arguments.length;r>a;a++){t=arguments[a];for(n in t)l.call(t,n)&&(e[n]=t[n])}return e},d.pick=function(e,t,n){var a,r={};if(null==e)return r;if(d.isFunction(t)){t=p(t,n);for(a in e){var i=e[a];t(i,a,e)&&(r[a]=i)}}else{var c=o.apply([],s.call(arguments,1));e=new Object(e);for(var l=0,u=c.length;u>l;l++)a=c[l],a in e&&(r[a]=e[a])}return r},d.omit=function(e,t,n){if(d.isFunction(t))t=d.negate(t);else{var a=d.map(o.apply([],s.call(arguments,1)),String);t=function(e,t){return!d.contains(a,t)}}return d.pick(e,t,n)},d.defaults=function(e){if(!d.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var a=arguments[t];for(var r in a)void 0===e[r]&&(e[r]=a[r])}return e},d.clone=function(e){return d.isObject(e)?d.isArray(e)?e.slice():d.extend({},e):e},d.tap=function(e,t){return t(e),e};var b=function(e,t,n,a){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof d&&(e=e._wrapped),t instanceof d&&(t=t._wrapped);var r=c.call(e);if(r!==c.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=n.length;i--;)if(n[i]===e)return a[i]===t;var s=e.constructor,o=t.constructor;if(s!==o&&"constructor"in e&&"constructor"in t&&!(d.isFunction(s)&&s instanceof s&&d.isFunction(o)&&o instanceof o))return!1;n.push(e),a.push(t);var l,u;if("[object Array]"===r){if(l=e.length,u=l===t.length)for(;l--&&(u=b(e[l],t[l],n,a)););}else{var h,f=d.keys(e);if(l=f.length,u=d.keys(t).length===l)for(;l--&&(h=f[l],u=d.has(t,h)&&b(e[h],t[h],n,a)););}return n.pop(),a.pop(),u};d.isEqual=function(e,t){return b(e,t,[],[])},d.isEmpty=function(e){if(null==e)return!0;if(d.isArray(e)||d.isString(e)||d.isArguments(e))return 0===e.length;for(var t in e)if(d.has(e,t))return!1;return!0},d.isElement=function(e){return!(!e||1!==e.nodeType)},d.isArray=u||function(e){return"[object Array]"===c.call(e)},d.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){d["is"+e]=function(t){return c.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(e){return d.has(e,"callee")}),"function"!=typeof/./&&(d.isFunction=function(e){return"function"==typeof e||!1}),d.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},d.isNaN=function(e){return d.isNumber(e)&&e!==+e},d.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},d.isNull=function(e){return null===e},d.isUndefined=function(e){return void 0===e},d.has=function(e,t){return null!=e&&l.call(e,t)},d.noConflict=function(){return e._=t,this},d.identity=function(e){return e},d.constant=function(e){return function(){return e}},d.noop=function(){},d.property=function(e){return function(t){return t[e]}},d.matches=function(e){var t=d.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var a=0;n>a;a++){var r=t[a],i=r[0];if(r[1]!==e[i]||!(i in e))return!1}return!0}},d.times=function(e,t,n){var a=Array(Math.max(0,e));t=p(t,n,1);for(var r=0;e>r;r++)a[r]=t(r);return a},d.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},d.now=Date.now||function(){return(new Date).getTime()};var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=d.invert(y),x=function(e){var t=function(t){return e[t]},n="(?:"+d.keys(e).join("|")+")",a=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,a.test(e)?e.replace(r,t):e}};d.escape=x(y),d.unescape=x(w),d.result=function(e,t){if(null!=e){var n=e[t];return d.isFunction(n)?e[t]():n}};var R=0;d.uniqueId=function(e){var t=++R+"";return e?e+t:t},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,T=function(e){return"\\"+k[e]};d.template=function(e,t,n){!t&&n&&(t=n),t=d.defaults({},t,d.templateSettings);var a=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),r=0,i="__p+='";e.replace(a,function(t,n,a,s,o){return i+=e.slice(r,o).replace(I,T),r=o+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":a?i+="'+\n((__t=("+a+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var s=new Function(t.variable||"obj","_",i)}catch(e){throw e.source=i,e}var o=function(e){return s.call(this,e,d)},c=t.variable||"obj";return o.source="function("+c+"){\n"+i+"}",o},d.chain=function(e){var t=d(e);return t._chain=!0,t};var F=function(e){return this._chain?d(e).chain():e};d.mixin=function(e){d.each(d.functions(e),function(t){var n=d[t]=e[t];d.prototype[t]=function(){var e=[this._wrapped];return i.apply(e,arguments),F.call(this,n.apply(d,e))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];d.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],F.call(this,n)}}),d.each(["concat","join","slice"],function(e){var t=n[e];d.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this),this.FirechatDefaultTemplates=this.FirechatDefaultTemplates||{},this.FirechatDefaultTemplates["templates/layout-full.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div id='firechat' class='full'>\n<div id='firechat-header' class='clearfix'>\n<div class='clearfix'><div class='half firechat-dropdown' style=''>\n<a id='firechat-btn-rooms' class='firechat-dropdown-toggle btn full' data-toggle=\"firechat-dropdown\" href='#'>\n<span class='icon user-chat'></span>\nChat Rooms\n<span class='caret'></span>\n</a>\n<div class='firechat-dropdown-menu full' role='menu'><ul id='firechat-room-list'></ul><div class='firechat-dropdown-footer aligncenter'>\n<button type='button' class='btn twothird center' id='firechat-btn-create-room-prompt'>Create Room</button>\n</div></div></div>\n<div class='half firechat-dropdown' style=''>\n<a data-event='firechat-user-search-btn' class='btn full firechat-dropdown-toggle' data-toggle=\"firechat-dropdown\" href='#'>\n<span class='icon user-group'></span>\nVisitors\n<span class='caret'></span>\n</a>\n<div class='firechat-dropdown-menu' role='menu'>\n<div class='firechat-dropdown-header aligncenter clearfix'>\n<div class='search-wrapper'>\n<span class='icon search'></span>\n<input type='text' data-event='firechat-user-search' data-template='templates/user-search-list-item.html' data-target='firechat-user-search' data-controls='firechat-user-search-controls' class='center fivesixth'>\n</div>\n</div>\n<ul id='firechat-user-search'></ul><div class='firechat-dropdown-footer aligncenter clearfix'>\n<div id='firechat-user-search-controls' class='clearfix'>\n<span class=\"quarter\"></span>\n<button type='button' class='btn half' data-event='firechat-user-search' data-toggle='firechat-pagination-next' data-template='templates/user-search-list-item.html' data-target='firechat-user-search' data-controls='firechat-user-search-controls' disabled=disabled>Next</button>\n</div><label class='center full'>\n<small>Use \"+ Invite\" button within chat rooms for regular invites.</small>\n</label>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div id='firechat-tabs' class='clearfix'>\n<ul id='firechat-tab-list' class='nav nav-tabs clearfix'></ul>\n<div id='firechat-tab-content' class='tab-content'></div>\n</div><div id='firechat-footer' class='clearfix'></div>\n</div>";return __p},this.FirechatDefaultTemplates["templates/layout-popout.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div id='firechat' class='full'>\n<div id='firechat-tabs' class='clearfix'>\n<ul id='firechat-tab-list' class='nav nav-tabs clearfix'></ul>\n<div id='firechat-tab-content' class='tab-content'></div>\n</div>\n</div>";return __p},this.FirechatDefaultTemplates["templates/message-context-menu.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<div data-toggle='firechat-contextmenu' class='contextmenu' data-message-id='"+__e(id)+"'>\n<ul>\n<li><a href='#!' data-event='firechat-user-warn'>Warn User</a></li>\n",allowKick&&(__p+="\n<li><a href='#!' data-event='firechat-user-kick'>Kick User</a></li>\n"),__p+="\n<li><a href='#!' data-event='firechat-user-suspend-hour'>Suspend User (1 Hour)</a></li>\n<li><a href='#!' data-event='firechat-user-suspend-day'>Suspend User (1 Day)</a></li>\n<li><a href='#!' data-event='firechat-message-delete'>Delete Message</a></li>\n</ul>\n</div>";return __p},this.FirechatDefaultTemplates["templates/message.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<div class='message message-"+__e(type)+" ",isSelfMessage&&(__p+=" message-self "),__p+="' data-message-id='"+__e(id)+"' data-user-id='"+__e(userId)+"' data-user-name='"+__e(name)+"' data-class=\"firechat-message\">\n<div class='clearfix'>\n<label class='fourfifth'>\n<strong class='name' title='"+__e(name)+"'>"+__e(name)+"</strong>\n<em>("+__e(localtime)+")</em>:\n</label>",disableActions||(__p+="\n<label class='fifth alignright'>\n<a href='#!' data-event='firechat-user-chat' class='icon user-chat' title='Invite to Private Chat'>&nbsp;</a>\n<a href='#!' data-event='firechat-user-mute-toggle' class='icon user-mute' title='Mute User'>&nbsp;</a>\n</label>\n"),__p+="</div>\n<div class='clearfix message-content'>\n"+(null==(__t=message)?"":__t)+"\n</div>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt-alert.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='aligncenter clearfix'>\n<h6>"+__e(message)+"</h6>\n<p class='clearfix'>\n<button type='button' class='btn quarter right close'>Close</button>\n</p>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt-create-room.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='clearfix'>\n<h6>Give your chat room a name:</h6>\n<input data-input='firechat-room-name' type='text' placeholder='Room name...' style='margin-bottom: 5px;' maxlength='"+__e(maxLengthRoomName)+"'>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt-invitation.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='aligncenter clearfix'>\n<h5>"+__e(fromUserName)+"</h5>\n<p>invited you to join</p>\n<h5>"+__e(toRoomName)+"</h5>\n<p class='clearfix'>\n<button data-toggle='accept' type='button' class='btn'>Accept</button>\n<button data-toggle='decline' type='button' class='btn'>Decline</button>\n</p>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt-invite-private.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='aligncenter clearfix'>\n<h6>Invite <strong>"+__e(userName)+"</strong> to "+__e(roomName)+"?</h6>\n<p class='clearfix'>\n<button data-toggle='accept' type='button' class='btn'>Invite</button>\n<button data-toggle='decline' type='button' class='close btn'>Cancel</button>\n</p>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt-invite-reply.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<div class='aligncenter clearfix'>\n<h5>"+__e(toUserName)+"</h5>\n<p>\n",__p+="accepted"===status?" accepted your invite. ":" declined your invite. ",__p+="\n</p>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt-user-mute.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='aligncenter clearfix'>\n<h5>"+__e(userName)+"</h5>\n<p class='clearfix'>\n<button data-toggle='accept' type='button' class='btn'>Mute</button>\n<button data-toggle='decline' type='button' class='btn'>Cancel</button>\n</p>\n</div>";return __p},this.FirechatDefaultTemplates["templates/prompt.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='prompt hidden'>\n<div class='prompt-header'>\n"+__e(title)+"\n<a href='#!' class='close right'>X</a>\n</div>\n<div class='prompt-body clearfix'>\n"+(null==(__t=content)?"":__t)+"\n</div>\n<div class='prompt-footer'></div>\n</div>";return __p},this.FirechatDefaultTemplates["templates/room-list-item.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<li data-room-type='"+__e(type)+"' data-room-id='"+__e(id)+"' data-room-name='"+__e(name)+"'>\n<a href='#!' class='clearfix ",isRoomOpen&&(__p+=" highlight "),__p+="'>\n<span class='left' title='"+__e(name)+"'>"+__e(name)+"</span>\n</a>\n</li>";return __p},this.FirechatDefaultTemplates["templates/room-user-list-item.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<li data-user-id='"+__e(id)+"' data-user-name='"+__e(name)+"'>\n<a href='#!' class='clearfix'>\n<span class='left twothird clipped' title='"+__e(name)+"'>"+__e(name)+"</span>",disableActions||(__p+="\n<span data-event='firechat-user-mute-toggle' class='icon user-mute right ",isMuted&&(__p+=" red "),__p+="' title='Toggle User Mute'>&nbsp;</span>\n<span data-event='firechat-user-chat' class='icon user-chat right' title='Invite to Private Chat'>&nbsp;</span>\n"),__p+="\n</a>\n</li>";return __p},this.FirechatDefaultTemplates["templates/room-user-search-list-item.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<li data-user-id='"+__e(id)+"' data-user-name='"+__e(name)+"'>\n<a href='#!' class='clearfix'>\n",__p+=disableActions?"\n<span class='left fourfifth clipped' title='"+__e(name)+"'>"+__e(name)+"</span>\n":"\n<span data-event='firechat-user-invite' class='left fourfifth clipped' title='"+__e(name)+"'>"+__e(name)+"</span>\n<span data-event='firechat-user-invite' class='icon plus right' title='Invite to Room'>+</span>\n",__p+="\n</a>\n</li>";return __p},this.FirechatDefaultTemplates["templates/tab-content.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div id='"+__e(id)+"' data-room-id='"+__e(id)+"' class='tab-pane'>\n<div class='tab-pane-menu clearfix'><div class='firechat-dropdown twofifth'>\n<a data-event='firechat-user-room-list-btn' class='full btn firechat-dropdown-toggle' data-toggle=\"firechat-dropdown\" href='#' data-target='firechat-room-user-list-"+__e(id)+"'>\n<span class='icon user-group'></span>\nIn Room\n<span class='caret'></span>\n</a>\n<div class='firechat-dropdown-menu' role='menu'>\n<ul id='firechat-room-user-list-"+__e(id)+"' class='full'></ul>\n</div>\n</div><div class='firechat-dropdown twofifth'>\n<a data-event='firechat-user-search-btn' class='full btn firechat-dropdown-toggle' data-toggle=\"firechat-dropdown\" href='#'>\n<span class='icon plus'>+</span>\nInvite\n<span class='caret'></span>\n</a><div class='firechat-dropdown-menu' role='menu'>\n<div class='firechat-dropdown-header aligncenter clearfix'>\n<div class='search-wrapper'>\n<span class='icon search'></span>\n<input type='text' data-event='firechat-user-search' data-template='templates/room-user-search-list-item.html' data-target='firechat-room-user-search-"+__e(id)+"' data-controls='firechat-room-user-search-controls-"+__e(id)+"' class='center fivesixth'>\n</div>\n</div>\n<ul id='firechat-room-user-search-"+__e(id)+"'></ul><div class='firechat-dropdown-footer aligncenter clearfix'>\n<div id='firechat-room-user-search-controls-"+__e(id)+"' class='clearfix'><span class=\"quarter\"></span>\n\x3c!--\n<button type='button' class='btn third disabled' data-event='firechat-user-search' data-template='templates/room-user-search-list-item.html' data-target='firechat-room-user-search-"+__e(id)+"' data-controls='firechat-room-user-search-controls-"+__e(id)+"' data-toggle='firechat-pagination-prev' disabled=disabled>Prev</button>\n--\x3e\n<button type='button' class='btn half disabled' data-event='firechat-user-search' data-template='templates/room-user-search-list-item.html' data-target='firechat-room-user-search-"+__e(id)+"' data-controls='firechat-room-user-search-controls-"+__e(id)+"' data-toggle='firechat-pagination-next'  disabled=disabled>Next</button>\n</div>\n</div>\n</div>\n</div><a href='#!' data-event='firechat-close-tab' class='icon close right' style='15px 5px' title='Leave Room'></a></div><div class='clearfix'>\n<div id='firechat-messages"+__e(id)+"' class='chat'></div>\n</div><div class='clearfix'>\n<label>Your message:</label>\n<textarea id='textarea"+__e(id)+"' placeholder='Type your message here...'></textarea>\n</div>\n</div>";return __p},this.FirechatDefaultTemplates["templates/tab-menu-item.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<li data-room-id='"+__e(id)+"'>\n<a href='#"+__e(id)+"' data-toggle='firechat-tab' title='"+__e(name)+"'>"+__e(name)+"</a>\n</li>";return __p},this.FirechatDefaultTemplates["templates/user-search-list-item.html"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+="<li data-user-id='"+__e(id)+"' data-user-name='"+__e(name)+"'>\n<a href='#!' class='clearfix'>\n",__p+=disableActions?"\n<span class='left fivesixth clipped' title='"+__e(name)+"'>"+__e(name)+"</span>\n":"\n<span data-event='firechat-user-chat' class='left fivesixth clipped' title='"+__e(name)+"'>"+__e(name)+"</span>\n<span data-event='firechat-user-chat' class='icon user-chat right' title='Invite to Private Chat'>&nbsp;</span>\n",__p+="\n</a>\n</li>";return __p},function(e){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,a=function(){},r=function(){return n.apply(this instanceof a&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,r.prototype=new a,r}),Object.keys=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}}(),function(){function e(e,t){this._firechatRef=e,this._firebaseApp=e.database.app,this._user=null,this._userId=null,this._userName=null,this._isModerator=!1,this._sessionId=null,this._events={},this._rooms={},this._presenceBits={},this._userRef=null,this._messageRef=this._firechatRef.child("room-messages"),this._roomRef=this._firechatRef.child("room-metadata"),this._privateRoomRef=this._firechatRef.child("room-private-metadata"),this._moderatorsRef=this._firechatRef.child("moderators"),this._suspensionsRef=this._firechatRef.child("suspensions"),this._usersOnlineRef=this._firechatRef.child("user-names-online"),this._options=t||{},this._options.numMaxMessages=this._options.numMaxMessages||50}var t=this,n=t.Firechat;e.noConflict=function(){return t.Firechat=n,e},t.Firechat=e,e.prototype={_loadUserMetadata:function(e){var n=this;this._userRef.transaction(function(e){if(!e||!e.id||!e.name)return{id:n._userId,name:n._userName}},function(a,r,i){n._user=i.val(),n._moderatorsRef.child(n._userId).once("value",function(a){n._isModerator=!!a.val(),t.setTimeout(e,0)})})},_setupDataEvents:function(){var e=this._firechatRef.root.child(".info/connected");e.on("value",function(e){if(e.val()===!0)for(var t in this._presenceBits){var n=this._presenceBits[t],a=n.ref;a.onDisconnect().set(n.offlineValue),a.set(n.onlineValue)}},this),this._queuePresenceOperation(this._sessionRef,!0,null);var t=this._usersOnlineRef.child(this._userName.toLowerCase()),n=t.child(this._sessionId);this._queuePresenceOperation(n,{id:this._userId,name:this._userName},null),this._userRef.on("value",this._onUpdateUser,this),this._userRef.child("invites").on("child_added",this._onFirechatInvite,this),this._userRef.child("notifications").on("child_added",this._onNotification,this)},_addEventCallback:function(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)},_getEventCallbacks:function(e){return this._events.hasOwnProperty(e)?this._events[e]:[]},_invokeEventCallbacks:function(e){var t=[],n=this._getEventCallbacks(e);Array.prototype.push.apply(t,arguments),t=t.slice(1);for(var a=0;a<n.length;a+=1)n[a].apply(null,t)},_queuePresenceOperation:function(e,t,n){e.onDisconnect().set(n),e.set(t),this._presenceBits[e.toString()]={ref:e,onlineValue:t,offlineValue:n}},_removePresenceOperation:function(e,t){var n=e.toString();e.onDisconnect().cancel(),e.set(t),delete this._presenceBits[n]},_onUpdateUser:function(e){this._user=e.val(),this._userName=this._user.name,this._invokeEventCallbacks("user-update",this._user)},_onAuthRequired:function(){this._invokeEventCallbacks("auth-required")},_onEnterRoom:function(e){this._invokeEventCallbacks("room-enter",e)},_onNewMessage:function(e,t){var n=t.val();n.id=t.key,this._invokeEventCallbacks("message-add",e,n)},_onRemoveMessage:function(e,t){var n=t.key;this._invokeEventCallbacks("message-remove",e,n)},_onLeaveRoom:function(e){this._invokeEventCallbacks("room-exit",e)},_onNotification:function(e){var t=e.val();t.read||(("suspension"!==t.notificationType||t.data.suspendedUntil<(new Date).getTime())&&e.ref.child("read").set(!0),this._invokeEventCallbacks("notification",t))},_onFirechatInvite:function(e){var t=this,n=e.val();n.status||(n.id=n.id||e.key,t.getRoom(n.roomId,function(e){n.toRoomName=e.name,t._invokeEventCallbacks("room-invite",n)}))},_onFirechatInviteResponse:function(e){var t=e.val();t.id=t.id||e.key,this._invokeEventCallbacks("room-invite-response",t)}},e.prototype.setUser=function(e,n,a){var r=this;r._firebaseApp.auth().onAuthStateChanged(function(i){
i?(r._userId=e.toString(),r._userName=n.toString(),r._userRef=r._firechatRef.child("users").child(r._userId),r._sessionRef=r._userRef.child("sessions").push(),r._sessionId=r._sessionRef.key,r._loadUserMetadata(function(){t.setTimeout(function(){a(r._user),r._setupDataEvents()},0)})):r.warn("Firechat requires an authenticated Firebase reference. Pass an authenticated reference before loading.")})},e.prototype.resumeSession=function(){this._userRef.child("rooms").once("value",function(e){var t=e.val();for(var n in t)this.enterRoom(t[n].id)},function(){},this)},e.prototype.on=function(e,t){this._addEventCallback(e,t)},e.prototype.createRoom=function(e,t,n){var a=this,r=this._roomRef.push(),i={id:r.key,name:e,type:t||"public",createdByUserId:this._userId,createdAt:firebase.database.ServerValue.TIMESTAMP};"private"===t&&(i.authorizedUsers={},i.authorizedUsers[this._userId]=!0),r.set(i,function(e){e||a.enterRoom(r.key),n&&n(r.key)})},e.prototype.enterRoom=function(e){var t=this;t.getRoom(e,function(n){var a=n.name;if(e&&a&&!t._rooms[e]){if(t._rooms[e]=!0,t._user){t._userRef.child("rooms").child(e).set({id:e,name:a,active:!0});var r=t._firechatRef.child("room-users").child(e).child(t._userId).child(t._sessionId);t._queuePresenceOperation(r,{id:t._userId,name:t._userName},null)}t._onEnterRoom({id:e,name:a}),t._roomRef.child(e).once("value",function(n){t._messageRef.child(e).limitToLast(t._options.numMaxMessages).on("child_added",function(n){t._onNewMessage(e,n)},function(){t.leaveRoom(e)},t),t._messageRef.child(e).limitToLast(t._options.numMaxMessages).on("child_removed",function(n){t._onRemoveMessage(e,n)},function(){},t)},function(){},t)}})},e.prototype.leaveRoom=function(e){var t=this,n=t._firechatRef.child("room-users").child(e);if(t._messageRef.child(e).off(),t._user){var a=n.child(t._userId).child(t._sessionId);t._removePresenceOperation(a,null),t._userRef.child("rooms").child(e).remove()}delete t._rooms[e],t._onLeaveRoom(e)},e.prototype.sendMessage=function(e,t,n,a){var r,i=this,s={userId:i._userId,name:i._userName,timestamp:firebase.database.ServerValue.TIMESTAMP,message:t,type:n||"default"};return i._user?(r=i._messageRef.child(e).push(),void r.setWithPriority(s,firebase.database.ServerValue.TIMESTAMP,a)):(i._onAuthRequired(),void(a&&a(new Error("Not authenticated or user not set!"))))},e.prototype.deleteMessage=function(e,t,n){var a=this;a._messageRef.child(e).child(t).remove(n)},e.prototype.toggleUserMute=function(e,t){var n=this;return n._user?void n._userRef.child("muted").child(e).transaction(function(e){return!e||null},t):(n._onAuthRequired(),void(t&&t(new Error("Not authenticated or user not set!"))))},e.prototype.sendSuperuserNotification=function(e,t,n,a){var r=this,i=r._firechatRef.child("users").child(e).child("notifications");i.push({fromUserId:r._userId,timestamp:firebase.database.ServerValue.TIMESTAMP,notificationType:t,data:n||{}},a)},e.prototype.warnUser=function(e){var t=this;t.sendSuperuserNotification(e,"warning")},e.prototype.suspendUser=function(e,t,n){var a=this,r=(new Date).getTime()+1e3*t;a._suspensionsRef.child(e).set(r,function(t){return t&&n?n(t):(a.sendSuperuserNotification(e,"suspension",{suspendedUntil:r}),n(null))})},e.prototype.inviteUser=function(e,t){var n=this,a=function(){var a=n._firechatRef.child("users").child(e).child("invites").push();a.set({id:a.key,fromUserId:n._userId,fromUserName:n._userName,roomId:t}),a.on("value",n._onFirechatInviteResponse,function(){},n)};return n._user?void n.getRoom(t,function(r){if("private"===r.type){var i=n._roomRef.child(t).child("authorizedUsers");i.child(e).set(!0,function(e){e||a()})}else a()}):void n._onAuthRequired()},e.prototype.acceptInvite=function(e,t){var n=this;n._userRef.child("invites").child(e).once("value",function(a){var r=a.val();return null===r&&t?t(new Error("acceptInvite("+e+"): invalid invite id")):(n.enterRoom(r.roomId),void n._userRef.child("invites").child(e).update({status:"accepted",toUserName:n._userName},t))},n)},e.prototype.declineInvite=function(e,t){var n=this,a={status:"declined",toUserName:n._userName};n._userRef.child("invites").child(e).update(a,t)},e.prototype.getRoomList=function(e){var t=this;t._roomRef.once("value",function(t){e(t.val())})},e.prototype.getUsersByRoom=function(){var e=this,n=arguments[0],a=e._firechatRef.child("room-users").child(n),r=arguments[arguments.length-1],i=null;arguments.length>2&&(i=arguments[1]),a=i?a.limitToLast(i):a,a.once("value",function(e){var n=e.val()||{},a={};for(var i in n)for(var s in n[i]){a[i]=n[i][s];break}t.setTimeout(function(){r(a)},0)})},e.prototype.getUsersByPrefix=function(e,n,a,r,i){var s=this._usersOnlineRef,o=e.toLowerCase();s=n?s.startAt(null,n):a?s.endAt(null,a):o?s.startAt(null,o):s.startAt(),s=r?s.limitToLast(r):s,s.once("value",function(n){var a=n.val()||{},r={};for(var s in a){var c,l,u=a[s];for(var h in u){c=u[h].name,l=u[h].id;break}e.length>0&&0!==c.toLowerCase().indexOf(o)||(r[c]={name:c,id:l})}t.setTimeout(function(){i(r)},0)})},e.prototype.getRoom=function(e,t){this._roomRef.child(e).once("value",function(e){t(e.val())})},e.prototype.userIsModerator=function(){return this._isModerator},e.prototype.warn=function(e){console&&(e="Firechat Warning: "+e,"function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))}}(),function(e){function t(t,n,a){if(!t)throw new Error("FirechatUI: Missing required argument `firebaseRef`");if(!n)throw new Error("FirechatUI: Missing required argument `el`");a=a||{},this._options=a,this._el=n,this._user=null,this._chat=new Firechat(t,a),this._roomQueue=[],this.maxLengthUsername=15,this.maxLengthUsernameDisplay=15,this.maxLengthRoomName=24,this.maxLengthMessage=120,this.maxUserSearchResults=100,this.urlPattern=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,this.pseudoUrlPattern=/(^|[^\/])(www\.[\S]+(\b|$))/gim,this._renderLayout(),this.$wrapper=e("#firechat"),this.$roomList=e("#firechat-room-list"),this.$tabList=e("#firechat-tab-list"),this.$tabContent=e("#firechat-tab-content"),this.$messages={},this.$rateLimit={limitCount:10,limitInterval:1e4,limitWaitTime:3e4,history:{}},this._bindUIEvents(),this._bindDataEvents()}if(!e||parseInt(e().jquery.replace(/\./g,""),10)<170)throw new Error("jQuery 1.7 or later required!");var n=this,a=n.FirechatUI;if(n.FirechatUI=t,!self.FirechatDefaultTemplates)throw new Error("Unable to find chat templates!");t.noConflict=function(){return n.FirechatUI=a,t},t.prototype={_bindUIEvents:function(){this._bindForHeightChange(),this._bindForTabControls(),this._bindForRoomList(),this._bindForUserRoomList(),this._bindForUserSearch(),this._bindForUserMuting(),this._bindForChatInvites(),this._bindForRoomListing(),this._setupTabs(),this._setupDropdowns(),this._bindTextInputFieldLimits()},_bindDataEvents:function(){this._chat.on("user-update",this._onUpdateUser.bind(this)),this._chat.on("room-enter",this._onEnterRoom.bind(this)),this._chat.on("room-exit",this._onLeaveRoom.bind(this)),this._chat.on("message-add",this._onNewMessage.bind(this)),this._chat.on("message-remove",this._onRemoveMessage.bind(this)),this._chat.on("room-invite",this._onChatInvite.bind(this)),this._chat.on("room-invite-response",this._onChatInviteResponse.bind(this)),this._chat.on("notification",this._onNotification.bind(this))},_renderLayout:function(){var t=FirechatDefaultTemplates["templates/layout-full.html"];e(this._el).html(t({maxLengthUsername:this.maxLengthUsername}))},_onUpdateUser:function(t){this._user=t;var n=this._user.muted||{};e('[data-event="firechat-user-mute-toggle"]').each(function(t,a){var r=e(this).closest("[data-user-id]").data("user-id");e(this).toggleClass("red",!!n[r])});for(var a in n)e('.message[data-user-id="'+a+'"]').fadeOut()},_onEnterRoom:function(e){this.attachTab(e.id,e.name)},_onLeaveRoom:function(e){this.removeTab(e),this._roomQueue.length>0&&this._chat.enterRoom(this._roomQueue.shift(e))},_onNewMessage:function(e,t){var n=t.userId;this._user&&this._user.muted&&this._user.muted[n]||this.showMessage(e,t)},_onRemoveMessage:function(e,t){this.removeMessage(e,t)},_onChatInvite:function(e){var t=this,n=FirechatDefaultTemplates["templates/prompt-invitation.html"],a=this.prompt("Invite",n(e));a.find("a.close").click(function(){return a.remove(),t._chat.declineInvite(e.id),!1}),a.find("[data-toggle=accept]").click(function(){return a.remove(),t._chat.acceptInvite(e.id),!1}),a.find("[data-toggle=decline]").click(function(){return a.remove(),t._chat.declineInvite(e.id),!1})},_onChatInviteResponse:function(e){if(e.status){var t,n=this,a=FirechatDefaultTemplates["templates/prompt-invite-reply.html"];e.status&&"accepted"===e.status?(t=this.prompt("Accepted",a(e)),this._chat.getRoom(e.roomId,function(t){n.attachTab(e.roomId,t.name)})):t=this.prompt("Declined",a(e)),t.find("a.close").click(function(){return t.remove(),!1})}},_onNotification:function(e){if("warning"===e.notificationType)this.renderAlertPrompt("Warning","You are being warned for inappropriate messaging. Further violation may result in temporary or permanent ban of service.");else if("suspension"===e.notificationType){var t=e.data.suspendedUntil,n=Math.round((t-(new Date).getTime())/1e3),a="";if(n>0){if(n>7200){var r=Math.floor(n/3600);a=r+" hours, ",n-=3600*r}a+=Math.floor(n/60)+" minutes",this.renderAlertPrompt("Suspended","A moderator has suspended you for violating site rules. You cannot send messages for another "+a+".")}}}},t.prototype.setUser=function(e,t){var n=this;n._chat.setUser(e,t,function(e){n._user=e,n._chat.userIsModerator()&&n._bindSuperuserUIEvents(),n._chat.resumeSession()})},t.prototype.on=function(e,t){this._chat.on(e,t)},t.prototype._bindSuperuserUIEvents=function(){var t=this,n=function(t){var n=e(this),a=n.closest("[data-message-id]").data("message-id"),r=e('[data-message-id="'+a+'"]').closest("[data-user-id]").data("user-id"),i=e('[data-message-id="'+a+'"]').closest("[data-room-id]").data("room-id");return{messageId:a,userId:r,roomId:i}},a=function(){e('[data-toggle="firechat-contextmenu"]').each(function(){e(this).remove()}),e("#firechat .message.highlighted").each(function(){e(this).removeClass("highlighted")})},r=function(r){var i,s=e(this),o=s.closest("[data-message-id]"),c=FirechatDefaultTemplates["templates/message-context-menu.html"],l=n.call(this,r);r.preventDefault(),a(),s.addClass("highlighted"),t._chat.getRoom(l.roomId,function(n){i=e(c({id:o.data("message-id")})),i.css({left:r.clientX,top:r.clientY}).appendTo(t.$wrapper)})};e(document).bind("click",{self:this},function(e){e.button&&2==e.button||a()}),e(document).delegate('[data-class="firechat-message"]',"contextmenu",r),e(document).delegate('[data-event="firechat-user-warn"]',"click",function(e){var a=n.call(this,e);t._chat.warnUser(a.userId)}),e(document).delegate('[data-event="firechat-user-suspend-hour"]',"click",function(e){var a=n.call(this,e);t._chat.suspendUser(a.userId,3600)}),e(document).delegate('[data-event="firechat-user-suspend-day"]',"click",function(e){var a=n.call(this,e);t._chat.suspendUser(a.userId,86400)}),e(document).delegate('[data-event="firechat-message-delete"]',"click",function(e){var a=n.call(this,e);t._chat.deleteMessage(a.roomId,a.messageId)})},t.prototype._bindForHeightChange=function(){var t=e(this._el),n=null;setInterval(function(){var a=t.height();a!=n&&(n=a,e(".chat").each(function(e,t){}))},500)},t.prototype._bindForTabControls=function(){var t=this;e(document).delegate('[data-event="firechat-close-tab"]',"click",function(n){var a=e(this).closest("[data-room-id]").data("room-id");return t._chat.leaveRoom(a),!1})},t.prototype._bindForRoomList=function(){var t=this;e("#firechat-btn-rooms").bind("click",function(){if(!e(this).parent().hasClass("open")){var n=(e(this),FirechatDefaultTemplates["templates/room-list-item.html"]),a=function(){var n=e(this).parent(),a=n.data("room-id"),r=n.data("room-name");return t.$messages[a]?t.focusTab(a):t._chat.enterRoom(a,r),!1};t._chat.getRoomList(function(r){t.$roomList.empty();for(var i in r){var s=r[i];if("public"==s.type){s.isRoomOpen=!!t.$messages[s.id];var o=e(n(s));o.children("a").bind("click",a),t.$roomList.append(o.toggle(!0))}}})}})},t.prototype._bindForUserRoomList=function(){var t=this;e(document).delegate('[data-event="firechat-user-room-list-btn"]',"click",function(n){n.stopPropagation();var a=e(this),r=a.closest("[data-room-id]").data("room-id"),i=FirechatDefaultTemplates["templates/room-user-list-item.html"],s=a.data("target"),o=e("#"+s);o.empty(),t._chat.getUsersByRoom(r,function(n){for(var a in n)user=n[a],user.disableActions=!t._user||user.id===t._user.id,user.nameTrimmed=t.trimWithEllipsis(user.name,t.maxLengthUsernameDisplay),user.isMuted=t._user&&t._user.muted&&t._user.muted[user.id],o.append(e(i(user)));t.sortListLexicographically("#"+s)})})},t.prototype._bindForUserSearch=function(){var t=this,n=function(t){var n=e(this),r=n.data("target"),i=n.data("controls"),s=n.data("template"),o=n.val()||n.data("prefix")||"",c=n.data("startAt")||null,l=n.data("endAt")||null;t.preventDefault(),a(r,s,i,o,c,l)},a=function(n,a,r,i,s,o){var c=e("#"+n),l=e("#"+r),u=FirechatDefaultTemplates[a];t._chat.getUsersByPrefix(i,s,o,t.maxUserSearchResults,function(e){var n,a,r,s,o,h=0;c.empty();for(r in e){var f=e[r];if(f.disableActions=!t._user||f.id===t._user.id,h+=1,c.append(u(f)),1===h)s=f.name.toLowerCase();else if(h>=t.maxUserSearchResults){o=f.name.toLowerCase();break}}l&&(n=l.find('[data-toggle="firechat-pagination-prev"]'),a=l.find('[data-toggle="firechat-pagination-next"]'),o?a.data("event","firechat-user-search").data("startAt",o).data("prefix",i).removeClass("disabled").removeAttr("disabled"):a.data("event",null).data("startAt",null).data("prefix",null).addClass("disabled").attr("disabled","disabled"))})};e(document).delegate('[data-event="firechat-user-search"]',"keyup",n),e(document).delegate('[data-event="firechat-user-search"]',"click",n),e(document).delegate('[data-event="firechat-user-search-btn"]',"click",function(t){t.stopPropagation();var n=e(this).next("div.firechat-dropdown-menu").find("input");n.focus(),n.trigger(jQuery.Event("keyup"))}),e(document).delegate('[data-event="firechat-user-search"]',"click",function(e){e.stopPropagation()})},t.prototype._bindForUserMuting=function(){var t=this;e(document).delegate('[data-event="firechat-user-mute-toggle"]',"click",function(n){var a=e(this),r=a.closest("[data-user-id]").data("user-id"),i=a.closest("[data-user-name]").data("user-name"),s=a.hasClass("red"),o=FirechatDefaultTemplates["templates/prompt-user-mute.html"];if(n.preventDefault(),s)t._chat.toggleUserMute(r);else{var c=t.prompt("Mute User?",o({userName:i}));c.find("a.close").first().click(function(){return c.remove(),!1}),c.find("[data-toggle=decline]").first().click(function(){return c.remove(),!1}),c.find("[data-toggle=accept]").first().click(function(){return t._chat.toggleUserMute(r),c.remove(),!1})}})},t.prototype._bindForChatInvites=function(){var t=this,n=function(n){var a,r=e(this),i=r.closest("[data-user-id]").data("user-id"),s=r.closest("[data-room-id]").data("room-id"),o=r.closest("[data-user-name]").data("user-name"),c=FirechatDefaultTemplates["templates/prompt-invite-private.html"];return t._chat.getRoom(s,function(e){return a=t.prompt("Invite",c({userName:o,roomName:e.name})),a.find("a.close").click(function(){return a.remove(),!1}),a.find("[data-toggle=decline]").click(function(){return a.remove(),!1}),a.find("[data-toggle=accept]").first().click(function(){return a.remove(),t._chat.inviteUser(i,s,e.name),!1}),!1}),!1},a=function(n){var a,r=e(this),i=r.closest("[data-user-id]").data("user-id"),s=r.closest("[data-user-name]").data("user-name"),o=FirechatDefaultTemplates["templates/prompt-invite-private.html"];return i&&s&&(a=t.prompt("Private Invite",o({userName:s,roomName:"Private Chat"})),a.find("a.close").click(function(){return a.remove(),!1}),a.find("[data-toggle=decline]").click(function(){return a.remove(),!1}),a.find("[data-toggle=accept]").first().click(function(){a.remove();var e="Private Chat";return t._chat.createRoom(e,"private",function(n){t._chat.inviteUser(i,n,e)}),!1})),!1};e(document).delegate('[data-event="firechat-user-chat"]',"click",a),e(document).delegate('[data-event="firechat-user-invite"]',"click",n)},t.prototype._bindForRoomListing=function(){var t=this,n=e("#firechat-btn-create-room-prompt"),a=e("#firechat-btn-create-room");n.bind("click",function(e){return t.promptCreateRoom(),!1}),a.bind("click",function(n){var a=e("#firechat-input-room-name").val();return e("#firechat-prompt-create-room").remove(),t._chat.createRoom(a),!1})},t.prototype._setupTabs=function(){var t=function(t){var a,r,i=t,s=i.closest("ul:not(.firechat-dropdown-menu)"),o=i.attr("data-target"),c=s.find(".active:last a")[0];o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i.parent("li").hasClass("active")||(r=e.Event("show",{relatedTarget:c}),i.trigger(r),r.isDefaultPrevented()||(a=e(o),n(i.parent("li"),s),n(a,a.parent(),function(){i.trigger({type:"shown",relatedTarget:c})})))},n=function(t,n,a){function r(){i.removeClass("active").find("> .firechat-dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?t.addClass("in"):t.removeClass("fade"),t.parent(".firechat-dropdown-menu")&&t.closest("li.firechat-dropdown").addClass("active"),a&&a()}var i=n.find("> .active"),s=a&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,r):r(),i.removeClass("in")};e(document).delegate('[data-toggle="firechat-tab"]',"click",function(n){n.preventDefault(),t(e(this))})},t.prototype._setupDropdowns=function(){var t=function(t){var r=e(this),i=a(r),s=i.hasClass("open");if(!r.is(".disabled, :disabled"))return n(),s||i.toggleClass("open"),r.focus(),!1},n=function(){e("[data-toggle=firechat-dropdown]").each(function(){a(e(this)).removeClass("open")})},a=function(t){var n,a=t.attr("data-target");return a||(a=t.attr("href"),a=a&&/#/.test(a)&&a.replace(/.*(?=#[^\s]*$)/,"")),n=a&&"#"!==a&&e(a),n&&n.length||(n=t.parent()),n};e(document).bind("click",n).delegate(".firechat-dropdown-menu","click",function(e){e.stopPropagation()}).delegate("[data-toggle=firechat-dropdown]","click",t)},t.prototype._bindTextInputFieldLimits=function(){e("body").delegate('input[data-provide="limit"], textarea[data-provide="limit"]',"keyup",function(t){var n=e(this),a=e(n.data("counter")),r=n.attr("maxlength"),i=n.val().length;a.html(Math.max(0,r-i))})},t.prototype.renderAlertPrompt=function(e,t){var n=FirechatDefaultTemplates["templates/prompt-alert.html"],a=this.prompt(e,n({message:t}));a.find(".close").click(function(){return a.remove(),!1})},t.prototype.toggleInputs=function(t){e("#firechat-tab-content textarea").each(function(){var n=e(this);t?e(this).val(""):e(this).val("You have exceeded the message limit, please wait before sending."),n.prop("disabled",!t)}),e("#firechat-input-name").prop("disabled",!t)},t.prototype.attachTab=function(t,n){var a=this;if(this.$messages[t])return void this.focusTab(t);var r={id:t,name:n},i=FirechatDefaultTemplates["templates/tab-content.html"],s=e(i(r));this.$tabContent.prepend(s);var o=e("#firechat-messages"+t);this.$messages[t]=o;var c=s.find("textarea").first();c.bind("keydown",function(e){var n=a.trimWithEllipsis(c.val(),a.maxLengthMessage);if(13===e.which&&""!==n)return c.val(""),a._chat.sendMessage(t,n),!1});var l=FirechatDefaultTemplates["templates/tab-menu-item.html"],u=e(l(r));this.$tabList.prepend(u),u.bind("shown",function(e){o.scrollTop(o[0].scrollHeight)});var h=this.$tabList.children("li"),f=Math.floor(e("#firechat-tab-list").width()/h.length);this.$tabList.children("li").css("width",f),this.$roomList.children("[data-room-id="+t+"]").children("a").addClass("highlight"),e("#firechat-btn-room-user-list-"+t).bind("click",function(){return a.sortListLexicographically("#firechat-room-user-list-"+t),!1}),this.focusTab(t)},t.prototype.focusTab=function(e){if(this.$messages[e]){var t=this.$tabList.find("[data-room-id="+e+"]").find("a");t.length&&t.first().trigger("click")}},t.prototype.removeTab=function(t){delete this.$messages[t],this.$tabContent.find("[data-room-id="+t+"]").remove(),this.$tabList.find("[data-room-id="+t+"]").remove();var n=this.$tabList.children("li"),a=Math.floor(e("#firechat-tab-list").width()/n.length);this.$tabList.children("li").css("width",a),this.$tabList.find('[data-toggle="firechat-tab"]').first().trigger("click"),this.$roomList.children("[data-room-id="+t+"]").children("a").removeClass("highlight")},t.prototype.showMessage=function(t,n){var a=this,r={id:n.id,localtime:a.formatTime(n.timestamp),message:n.message||"",userId:n.userId,name:n.name,type:n.type||"default",isSelfMessage:a._user&&n.userId==a._user.id,disableActions:!a._user||n.userId==a._user.id};r.message=_.map(r.message.split(" "),function(e){return a.urlPattern.test(e)||a.pseudoUrlPattern.test(e)?a.linkify(encodeURI(e)):_.escape(e)}).join(" "),r.message=a.trimWithEllipsis(r.message,a.maxLengthMessage);var i=FirechatDefaultTemplates["templates/message.html"],s=e(i(r)),o=a.$messages[t];if(o){var c=!1;o.scrollTop()/(o[0].scrollHeight-o[0].offsetHeight)>=.95?c=!0:o[0].scrollHeight<=o.height()&&(c=!0),o.append(s),c&&o.scrollTop(o[0].scrollHeight)}},t.prototype.removeMessage=function(t,n){e('.message[data-message-id="'+n+'"]').remove()},t.prototype.sortListLexicographically=function(t){e(t).children("li").sort(function(t,n){var a=e(t).text().toUpperCase(),r=e(n).text().toUpperCase();return a<r?-1:a>r?1:0}).appendTo(t)},t.prototype.trimWithEllipsis=function(e,t){return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),t&&e.length<=t?e:e.substring(0,t)+"..."},t.prototype.formatTime=function(e){var t=e?new Date(e):new Date,n=t.getHours()||12,a=""+t.getMinutes(),r=t.getHours()>=12?"pm":"am";return n=n>12?n-12:n,a=a.length<2?"0"+a:a,""+n+":"+a+r},t.prototype.promptCreateRoom=function(){var e=this,t=FirechatDefaultTemplates["templates/prompt-create-room.html"],n=this.prompt("Create Public Room",t({maxLengthRoomName:this.maxLengthRoomName,isModerator:e._chat.userIsModerator()}));n.find("a.close").first().click(function(){return n.remove(),!1}),n.find("[data-toggle=submit]").first().click(function(){var t=n.find("[data-input=firechat-room-name]").first().val();return""!==t&&(e._chat.createRoom(t,"public"),n.remove()),!1}),n.find("[data-input=firechat-room-name]").first().focus(),n.find("[data-input=firechat-room-name]").first().bind("keydown",function(t){if(13===t.which){var a=n.find("[data-input=firechat-room-name]").first().val();if(""!==a)return e._chat.createRoom(a,"public"),n.remove(),!1}})},t.prototype.prompt=function(t,n){var a,r=FirechatDefaultTemplates["templates/prompt.html"];return a=e(r({title:t,content:n})).css({top:this.$wrapper.position().top+.333*this.$wrapper.height(),left:this.$wrapper.position().left+.125*this.$wrapper.width(),width:.75*this.$wrapper.width()}),this.$wrapper.append(a.removeClass("hidden")),a},t.prototype.linkify=function(e){var t=this;return e.replace(t.urlPattern,'<a target="_blank" href="$&">$&</a>').replace(t.pseudoUrlPattern,'$1<a target="_blank" href="http://$2">$2</a>')}}(jQuery);</script>

</head><body><div hidden="" by-vulcanize=""><dom-module id="paper-material-shared-styles" assetpath="../bower_components/paper-material/">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host([elevation="1"]) {
        @apply(--shadow-elevation-2dp);
      }

      :host([elevation="2"]) {
        @apply(--shadow-elevation-4dp);
      }

      :host([elevation="3"]) {
        @apply(--shadow-elevation-6dp);
      }

      :host([elevation="4"]) {
        @apply(--shadow-elevation-8dp);
      }

      :host([elevation="5"]) {
        @apply(--shadow-elevation-16dp);
      }
    </style>
  </template>
</dom-module>
<dom-module id="paper-material" assetpath="../bower_components/paper-material/">
  <template>
    <style include="paper-material-shared-styles"></style>
    <style>
      :host([animated]) {
        @apply(--shadow-transition);
      }
    </style>

    <content></content>
  </template>
</dom-module>
<script>Polymer({is:"paper-material",properties:{elevation:{type:Number,reflectToAttribute:!0,value:1},animated:{type:Boolean,reflectToAttribute:!0,value:!1}}});</script>
<script>console.warn("This file is deprecated. Please use `iron-flex-layout/iron-flex-layout-classes.html`, and one of the specific dom-modules instead");</script>

<style>

  /*******************************
            Flex Layout
  *******************************/

  html /deep/ .layout.horizontal,
  html /deep/ .layout.horizontal-reverse,
  html /deep/ .layout.vertical,
  html /deep/ .layout.vertical-reverse {
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
  }

  html /deep/ .layout.inline {
    display: -ms-inline-flexbox;
    display: -webkit-inline-flex;
    display: inline-flex;
  }

  html /deep/ .layout.horizontal {
    -ms-flex-direction: row;
    -webkit-flex-direction: row;
    flex-direction: row;
  }

  html /deep/ .layout.horizontal-reverse {
    -ms-flex-direction: row-reverse;
    -webkit-flex-direction: row-reverse;
    flex-direction: row-reverse;
  }

  html /deep/ .layout.vertical {
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }

  html /deep/ .layout.vertical-reverse {
    -ms-flex-direction: column-reverse;
    -webkit-flex-direction: column-reverse;
    flex-direction: column-reverse;
  }

  html /deep/ .layout.wrap {
    -ms-flex-wrap: wrap;
    -webkit-flex-wrap: wrap;
    flex-wrap: wrap;
  }

  html /deep/ .layout.wrap-reverse {
    -ms-flex-wrap: wrap-reverse;
    -webkit-flex-wrap: wrap-reverse;
    flex-wrap: wrap-reverse;
  }

  html /deep/ .flex-auto {
    -ms-flex: 1 1 auto;
    -webkit-flex: 1 1 auto;
    flex: 1 1 auto;
  }

  html /deep/ .flex-none {
    -ms-flex: none;
    -webkit-flex: none;
    flex: none;
  }

  html /deep/ .flex,
  html /deep/ .flex-1 {
    -ms-flex: 1;
    -webkit-flex: 1;
    flex: 1;
  }

  html /deep/ .flex-2 {
    -ms-flex: 2;
    -webkit-flex: 2;
    flex: 2;
  }

  html /deep/ .flex-3 {
    -ms-flex: 3;
    -webkit-flex: 3;
    flex: 3;
  }

  html /deep/ .flex-4 {
    -ms-flex: 4;
    -webkit-flex: 4;
    flex: 4;
  }

  html /deep/ .flex-5 {
    -ms-flex: 5;
    -webkit-flex: 5;
    flex: 5;
  }

  html /deep/ .flex-6 {
    -ms-flex: 6;
    -webkit-flex: 6;
    flex: 6;
  }

  html /deep/ .flex-7 {
    -ms-flex: 7;
    -webkit-flex: 7;
    flex: 7;
  }

  html /deep/ .flex-8 {
    -ms-flex: 8;
    -webkit-flex: 8;
    flex: 8;
  }

  html /deep/ .flex-9 {
    -ms-flex: 9;
    -webkit-flex: 9;
    flex: 9;
  }

  html /deep/ .flex-10 {
    -ms-flex: 10;
    -webkit-flex: 10;
    flex: 10;
  }

  html /deep/ .flex-11 {
    -ms-flex: 11;
    -webkit-flex: 11;
    flex: 11;
  }

  html /deep/ .flex-12 {
    -ms-flex: 12;
    -webkit-flex: 12;
    flex: 12;
  }

  /* alignment in cross axis */

  html /deep/ .layout.start {
    -ms-flex-align: start;
    -webkit-align-items: flex-start;
    align-items: flex-start;
  }

  html /deep/ .layout.center,
  html /deep/ .layout.center-center {
    -ms-flex-align: center;
    -webkit-align-items: center;
    align-items: center;
  }

  html /deep/ .layout.end {
    -ms-flex-align: end;
    -webkit-align-items: flex-end;
    align-items: flex-end;
  }

  /* alignment in main axis */

  html /deep/ .layout.start-justified {
    -ms-flex-pack: start;
    -webkit-justify-content: flex-start;
    justify-content: flex-start;
  }

  html /deep/ .layout.center-justified,
  html /deep/ .layout.center-center {
    -ms-flex-pack: center;
    -webkit-justify-content: center;
    justify-content: center;
  }

  html /deep/ .layout.end-justified {
    -ms-flex-pack: end;
    -webkit-justify-content: flex-end;
    justify-content: flex-end;
  }

  html /deep/ .layout.around-justified {
    -ms-flex-pack: around;
    -webkit-justify-content: space-around;
    justify-content: space-around;
  }

  html /deep/ .layout.justified {
    -ms-flex-pack: justify;
    -webkit-justify-content: space-between;
    justify-content: space-between;
  }

  /* self alignment */

  html /deep/ .self-start {
    -ms-align-self: flex-start;
    -webkit-align-self: flex-start;
    align-self: flex-start;
  }

  html /deep/ .self-center {
    -ms-align-self: center;
    -webkit-align-self: center;
    align-self: center;
  }

  html /deep/ .self-end {
    -ms-align-self: flex-end;
    -webkit-align-self: flex-end;
    align-self: flex-end;
  }

  html /deep/ .self-stretch {
    -ms-align-self: stretch;
    -webkit-align-self: stretch;
    align-self: stretch;
  }

  /*******************************
            Other Layout
  *******************************/

  html /deep/ .block {
    display: block;
  }

  /* IE 10 support for HTML5 hidden attr */
  html /deep/ [hidden] {
    display: none !important;
  }

  html /deep/ .invisible {
    visibility: hidden !important;
  }

  html /deep/ .relative {
    position: relative;
  }

  html /deep/ .fit {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }

  body.fullbleed {
    margin: 0;
    height: 100vh;
  }

  html /deep/ .scroll {
    -webkit-overflow-scrolling: touch;
    overflow: auto;
  }

  .fixed-bottom,
  .fixed-left,
  .fixed-right,
  .fixed-top {
    position: fixed;
  }

  html /deep/ .fixed-top {
    top: 0;
    left: 0;
    right: 0;
  }

  html /deep/ .fixed-right {
    top: 0;
    right: 0;
    bottom: 0;
  }

  html /deep/ .fixed-bottom {
    right: 0;
    bottom: 0;
    left: 0;
  }

  html /deep/ .fixed-left {
    top: 0;
    bottom: 0;
    left: 0;
  }

</style>
<script>console.warn("This file is deprecated. Please use `iron-flex-layout/iron-flex-layout-classes.html`, and one of the specific dom-modules instead");</script>

<style>

  /*******************************
            Flex Layout
  *******************************/

  .layout.horizontal,
  .layout.horizontal-reverse,
  .layout.vertical,
  .layout.vertical-reverse {
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
  }

  .layout.inline {
    display: -ms-inline-flexbox;
    display: -webkit-inline-flex;
    display: inline-flex;
  }

  .layout.horizontal {
    -ms-flex-direction: row;
    -webkit-flex-direction: row;
    flex-direction: row;
  }

  .layout.horizontal-reverse {
    -ms-flex-direction: row-reverse;
    -webkit-flex-direction: row-reverse;
    flex-direction: row-reverse;
  }

  .layout.vertical {
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }

  .layout.vertical-reverse {
    -ms-flex-direction: column-reverse;
    -webkit-flex-direction: column-reverse;
    flex-direction: column-reverse;
  }

  .layout.wrap {
    -ms-flex-wrap: wrap;
    -webkit-flex-wrap: wrap;
    flex-wrap: wrap;
  }

  .layout.wrap-reverse {
    -ms-flex-wrap: wrap-reverse;
    -webkit-flex-wrap: wrap-reverse;
    flex-wrap: wrap-reverse;
  }

  .flex-auto {
    -ms-flex: 1 1 auto;
    -webkit-flex: 1 1 auto;
    flex: 1 1 auto;
  }

  .flex-none {
    -ms-flex: none;
    -webkit-flex: none;
    flex: none;
  }

  .flex,
  .flex-1 {
    -ms-flex: 1;
    -webkit-flex: 1;
    flex: 1;
  }

  .flex-2 {
    -ms-flex: 2;
    -webkit-flex: 2;
    flex: 2;
  }

  .flex-3 {
    -ms-flex: 3;
    -webkit-flex: 3;
    flex: 3;
  }

  .flex-4 {
    -ms-flex: 4;
    -webkit-flex: 4;
    flex: 4;
  }

  .flex-5 {
    -ms-flex: 5;
    -webkit-flex: 5;
    flex: 5;
  }

  .flex-6 {
    -ms-flex: 6;
    -webkit-flex: 6;
    flex: 6;
  }

  .flex-7 {
    -ms-flex: 7;
    -webkit-flex: 7;
    flex: 7;
  }

  .flex-8 {
    -ms-flex: 8;
    -webkit-flex: 8;
    flex: 8;
  }

  .flex-9 {
    -ms-flex: 9;
    -webkit-flex: 9;
    flex: 9;
  }

  .flex-10 {
    -ms-flex: 10;
    -webkit-flex: 10;
    flex: 10;
  }

  .flex-11 {
    -ms-flex: 11;
    -webkit-flex: 11;
    flex: 11;
  }

  .flex-12 {
    -ms-flex: 12;
    -webkit-flex: 12;
    flex: 12;
  }

  /* alignment in cross axis */

  .layout.start {
    -ms-flex-align: start;
    -webkit-align-items: flex-start;
    align-items: flex-start;
  }

  .layout.center,
  .layout.center-center {
    -ms-flex-align: center;
    -webkit-align-items: center;
    align-items: center;
  }

  .layout.end {
    -ms-flex-align: end;
    -webkit-align-items: flex-end;
    align-items: flex-end;
  }

  /* alignment in main axis */

  .layout.start-justified {
    -ms-flex-pack: start;
    -webkit-justify-content: flex-start;
    justify-content: flex-start;
  }

  .layout.center-justified,
  .layout.center-center {
    -ms-flex-pack: center;
    -webkit-justify-content: center;
    justify-content: center;
  }

  .layout.end-justified {
    -ms-flex-pack: end;
    -webkit-justify-content: flex-end;
    justify-content: flex-end;
  }

  .layout.around-justified {
    -ms-flex-pack: around;
    -webkit-justify-content: space-around;
    justify-content: space-around;
  }

  .layout.justified {
    -ms-flex-pack: justify;
    -webkit-justify-content: space-between;
    justify-content: space-between;
  }

  /* self alignment */

  .self-start {
    -ms-align-self: flex-start;
    -webkit-align-self: flex-start;
    align-self: flex-start;
  }

  .self-center {
    -ms-align-self: center;
    -webkit-align-self: center;
    align-self: center;
  }

  .self-end {
    -ms-align-self: flex-end;
    -webkit-align-self: flex-end;
    align-self: flex-end;
  }

  .self-stretch {
    -ms-align-self: stretch;
    -webkit-align-self: stretch;
    align-self: stretch;
  }

  /*******************************
            Other Layout
  *******************************/

  .block {
    display: block;
  }

  /* IE 10 support for HTML5 hidden attr */
  [hidden] {
    display: none !important;
  }

  .invisible {
    visibility: hidden !important;
  }

  .relative {
    position: relative;
  }

  .fit {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }

  body.fullbleed {
    margin: 0;
    height: 100vh;
  }

  .scroll {
    -webkit-overflow-scrolling: touch;
    overflow: auto;
  }

  /* fixed position */

  .fixed-bottom,
  .fixed-left,
  .fixed-right,
  .fixed-top {
    position: fixed;
  }

  .fixed-top {
    top: 0;
    left: 0;
    right: 0;
  }

  .fixed-right {
    top: 0;
    right: 0;
    bottom: 0;
  }

  .fixed-bottom {
    right: 0;
    bottom: 0;
    left: 0;
  }

  .fixed-left {
    top: 0;
    bottom: 0;
    left: 0;
  }

</style>
<dom-module id="paper-chip" assetpath="../bower_components/paper-chip/">
  <template>
    <style>
      :host {
        display: inline-block;
        vertical-align: top;
        position: relative;
        outline: none;
        font-size: 14px;
        cursor: default;
        margin: 8px 0;
        height: 32px;
        overflow: visible;
        @apply(--paper-chip);
      }
      :host([animated]) *,
      :host([animated]) ::slotted(*) {
        transition: 200ms ease-in;
      }
      #main, #chip {
        border-radius: 16px;
      }
      #main {
        background-color: var(--paper-chip-background-color, --paper-grey-200);
        position: relative;
        color: var(--paper-chip-secondary-text-color, --secondary-text-color);
        @apply(--layout-vertical);
      }
      #chip {
        box-sizing: border-box;
        height: 32px;
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }
      paper-material {
        border-radius: 16px;
      }
      #icon {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-center-justified);
      }
      #icon ::slotted([slot=icon]) {
        margin-right: -4px;
        width: 32px;
        height: 32px;
        line-height: 32px;
        border-radius: 100%;
        overflow: hidden;
        text-align: center;
        vertical-align: middle;
        font-size: 16px;
        font-weight: bold;
        background-color: var(--paper-chip-icon-background-color, --paper-grey-500);
        color: var(--paper-chip-icon-text-color, --text-primary-color);
        @apply(--layout-flex);
      }
      #icon ::slotted(iron-icon.icon),
      #icon ::slotted(iron-icon.icon svg) { /* FIXME: only top-level selectors allowed */
        width: 32px;
        height: 32px;
      }
      #icon ::slotted(iron-icon.icon) {
        vertical-align: bottom;
      }
      #label {
        padding: 0 4px 0 12px;
        @apply(--layout-flex-auto);
        @apply(--layout-self-center);
      }
      :host([single-line]:not([removable])) #label {
        padding-right: 12px;
      }
      #label ::slotted([slot=label]),
      #label ::slotted([slot=caption]) {
        display: block;
        white-space: nowrap;
        margin: 0;
        font-weight: normal;
        font-size: 14px;
      }
      #label ::slotted([slot=label]) {
        @apply(--paper-chip-label);
      }
      #label ::slotted([slot=caption]) {
        @apply(--paper-chip-caption);
      }
      .icon-btn-wrapper {
        @apply(--layout-self-center);
      }
      #removeBtn {
        position: relative;
        margin: 0 8px 0 4px;
        padding: 2px;
        width: 12px;
        height: 12px;
        border-radius: 100%;
        background-color: var(--paper-chip-removebtn-background-color, --paper-grey-400);
        color: var(--paper-chip-removebtn-icon-color, --text-primary-color);
        cursor: pointer;
        @apply(--paper-chip-removebtn);
      }
      #removeBtn iron-icon {
        width: 12px;
        height: 12px;
        display: block;
        @apply(--paper-chip-removebtn-icon);
      }
      :host(:not([removable])) #removeBtn {
        display: none;
      }
      /* pressed state */
      :host([pressed]) #main {
        background-color: var(--paper-chip-pressed-background-color, --paper-grey-300);
      }

      /* initially hidden elements */
      :host(:not([opened])) #label ::slotted([slot=caption]) {
        color: var(--paper-chip-secondary-text-color, --secondary-text-color);
        font-size: 0;
        height: 0;
      }
      :host(:not([persist-remove-button]):not([single-line]):not([opened])) #removeBtn,
      :host(:not([persist-remove-button]):not([single-line]):not([opened])) #removeBtn .icon {
        width: 0;
        height: 0;
        margin: 0;
        padding: 0;
      }
      :host(:not([persist-remove-button]):not([single-line]):not([opened])) #label {
        padding-right: 12px;
      }
      :host(:not([opened])) #content {
        width: 0;
        height: 0;
        min-width: 100%;
        overflow: hidden;
      }
      :host(:not([opened])) #label ::slotted([slot=label]) {
        color: var(--paper-chip-secondary-text-color, --secondary-text-color);
      }

      /* opened state */
      :host([opened]) #main, :host([opened]) #chip {
        border-radius: 0;
      }
      :host([opened]) #content {
        height: auto;
        width: auto;
        min-width: 100%;
        overflow: hidden;
        @apply(--paper-chip-content);
      }
      :host([opened]) #chip {
        height: 72px;
      }
      :host([opened]) #chip,
      :host([opened]) #content ::slotted(*) {
        padding: 16px 12px;
        background-color: var(--paper-chip-opened-background-color, --paper-grey-50);
      }
      :host([opened]) #label ::slotted([slot=label]) {
        color: var(--paper-chip-primary-text-color, --primary-text-color);
        font-size: 16px;
        @apply(--paper-chip-label-opened);
      }
      :host([opened]) paper-material {
        border-radius: 0;
      }
      :host([opened]) #icon ::slotted([slot=icon]),
      :host([opened]) #icon ::slotted(iron-icon.icon svg) { /* FIXME: only top-level selectors allowed)
        font-size: 20px;
        width: 40px;
        height: 40px;
        line-height: 40px;
      }
      :host([opened]) #removeBtn {
        padding: 4px;
        margin-left: 20px;
        width: 16px;
        height: 16px;
      }
      :host([opened]) #removeBtn iron-icon {
        width: 16px;
        height: 16px;
      }

      /* open + active state */
      :host([opened][active]) #chip,
      :host([opened][active]) ::slotted {
        background-color: var(--paper-chip-active-color, --accent-color);
				color: var(--paper-chip-active-text-color, --text-primary-color);
      }
      :host([opened][active]) #removeBtn {
        color: var(--paper-chip-active-color, --accent-color);
        background-color: var(--paper-chip-active-text-color, --text-primary-color);
      }
      :host([opened][active]) #chip #label ::slotted([slot=label]) {
        color: var(--paper-chip-active-text-color, --text-primary-color);
      }
      :host([opened][active]) #chip #label ::slotted(h2) {
        color: var(--paper-chip-active-secondary-text-color, --text-primary-color);
      }
    </style>
    <paper-material id="shadow" elevation="{{_elevation}}" animated$="{{animated}}">
      <div id="main">
        <div id="chip">
          <div id="icon">
            <slot name="icon"></slot>
          </div>
          <div id="label">
            <slot name="label"></slot>
            <slot name="caption"></slot>
          </div>
          <div id="removeBtn" on-tap="remove" aria-label="remove button">
            <iron-icon icon="close" class="icon"></iron-icon>
          </div>
        </div>
        <div id="content">
          <slot></slot>
        </div>
      </div>
    </paper-material>
  </template>

  <script>Polymer({is:"paper-chip",behaviors:[Polymer.IronButtonState,Polymer.IronControlState],properties:{removable:{type:Boolean,value:!1,reflectToAttribute:!0},singleLine:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_singleLineChanged"},persistRemoveButton:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_singleLineChanged"},animated:{type:Boolean,value:!1,reflectToAttribute:!0},opened:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_openedChanged"},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},_elevation:{type:Number,computed:"_computeElevation(opened, focused, disabled, active, pressed)"},_keyTarget:{type:Object,value:function(){return this}}},listeners:{tap:"_onTap",blur:"_onBlur"},hostAttributes:{tabindex:"0"},ready:function(){this.$.removeBtn&&this.$.removeBtn.removeAttribute("tabindex")},_computeElevation:function(e,t,o){return t||o?1:e?4:0},_onTap:function(){this.toggleOpened()},_onBlur:function(){this.opened=!1},remove:function(e){e.stopPropagation();var t=this.fire("remove",{},{bubbles:!1,cancelable:!0});t.defaultPrevented||this.parentNode.removeChild(this)},toggleOpened:function(){this.singleLine||(this.opened=!this.opened)},_singleLineChanged:function(e){e&&this.opened&&(this.opened=!1)},_openedChanged:function(e){if(e&&this.singleLine)return void(this.opened=!1);if(this.animated){var t,o,n;t=this.$.content,o=n="",this.opened&&(this.animated=!1,this.opened=!0,o=t.offsetWidth+"px",n=t.offsetHeight+"px",this.opened=!1,this._forceReflow(),this.opened=!0,this.animated=!0),t.style.width=o,t.style.height=n}},_forceReflow:function(){return this.offsetHeight}});</script>

</dom-module>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
<script defer="" src="https://code.getmdl.io/1.1.3/material.min.js"></script>


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">





<dom-module id="fchat2-main" assetpath="/">

  <template>

    <style include="fchat2-styles">
      html, body {
        font-family: 'Roboto', 'Helvetica', sans-serif;
      }
      main, #messages-card {
        height: 100%;
        padding-bottom: 0;
      }
      #messages-card-container {
        height: calc(100% - 150px);
        padding-bottom: 0;
      }
      #messages-card {
        margin-top: 15px;
      }
      .mdl-layout__header-row span {
        margin-left: 15px;
        margin-top: 17px;
      }
      .mdl-grid {
        max-width: 1024px;
        margin: auto;
      }
      .material-icons {
        font-size: 36px;
        top: 8px;
        position: relative;
      }
      .mdl-layout__header-row {
        padding: 0;
        margin: 0 auto;
      }
      .mdl-card__supporting-text {
        width: auto;
        height: 100%;
        padding-top: 0;
        padding-bottom: 0;
      }
      #messages {
        overflow-y: auto;
        margin-bottom: 10px;
        height: calc(100% - 80px);
      }
      #message-filler {
        flex-grow: 1;
      }
      .message-container:first-of-type {
        border-top-width: 0;
      }
      .message-container {
        display: block;
        margin-top: 10px;
        border-top: 1px solid #f3f3f3;
        padding-top: 10px;
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }
      .message-container.visible {
        opacity: 1;
      }
      .message-container .pic {
        background-image: url("/images/profile_placeholder.png");
        background-repeat: no-repeat;
        width: 30px;
        height: 30px;
        background-size: 30px;
        border-radius: 20px;
      }
      .message-container .spacing {
        display: table-cell;
        vertical-align: top;
      }
      .message-container .message {
        display: table-cell;
        width: calc(100% - 40px);
        padding: 5px 0 5px 10px;
      }
      .message-container .name {
        display: inline-block;
        width: 100%;
        padding-left: 40px;
        color: #bbb;
        font-style: italic;
        font-size: 12px;
        box-sizing: border-box;
      }
      #message-form {
        display: flex;
        flex-direction: row;
        width: calc(100% - 48px);
        float: left;
      }
      #image-form {
        display: flex;
        flex-direction: row;
        width: 48px;
        float: right;
      }
      #message-form .mdl-textfield {
        width: calc(100% - 100px);
      }
      #message-form button, #image-form button {
        width: 100px;
        margin: 15px 0 0 10px;
      }
      .mdl-card {
        min-height: 0;
      }
      .mdl-card {
        background: linear-gradient(white, #f9f9f9);
        justify-content: space-between;
      }
      #user-container {
        position: absolute;
        display: flex;
        flex-direction: row;
        top: 22px;
        width: 100%;
        right: 0;
        padding-left: 10px;
        justify-content: flex-end;
        padding-right: 10px;
      }
      #user-container #user-pic {
        top: -3px;
        position: relative;
        display: inline-block;
        background-image: url("/images/profile_placeholder.png");
        background-repeat: no-repeat;
        width: 40px;
        height: 40px;
        background-size: 40px;
        border-radius: 20px;
      }
      #user-container #user-name {
        font-size: 16px;
        line-height: 36px;
        padding-right: 10px;
        padding-left: 20px;
      }
      #image-form #submitImage {
        width: auto;
        padding: 0 6px 0 1px;
        min-width: 0;
      }
      #image-form #submitImage .material-icons {
        top: -1px;
      }
      .message img {
        max-width: 300px;
        max-height: 200px;
      }
      #mediaCapture {
        display: none;
      }
      @media screen and (max-width: 610px) {
        header {
          height: 113px;
          padding-bottom: 80px !important;
        }
        #user-container {
          top: 72px;
          background-color: rgb(3,155,229);
          height: 38px;
          padding-top: 3px;
          padding-right: 2px;
        }
        #user-container #user-pic {
          top: 2px;
          width: 33px;
          height: 33px;
          background-size: 33px;
        }
      }
      .mdl-textfield__label:after {
        background-color: #0288D1;
      }
      .mdl-textfield--floating-label.is-focused .mdl-textfield__label {
        color: #0288D1;
      }
      .mdl-button .material-icons {
        top: -1px;
        margin-right: 5px;
      }    
    </style>  


    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header">

      <main class="mdl-layout__content mdl-color--grey-100">
        <div id="messages-card-container" class="mdl-cell mdl-cell--12-col mdl-grid">

          
          <div id="messages-card" class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--6-col-tablet mdl-cell--6-col-desktop">
            <div class="mdl-card__supporting-text mdl-color-text--grey-600">
              <div id="messages">
                <span id="message-filler"></span>
              </div>
              <form id="message-form" action="#">
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                  <input class="mdl-textfield__input" type="text" id="message">
                  <label class="mdl-textfield__label" for="message">Message...</label>
                </div>
                <button id="submit" disabled="" type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
                  Send
                </button>
              </form>
              <form id="image-form" action="#">
                <input id="mediaCapture" type="file" accept="image/*,capture=camera">
                <button id="submitImage" title="Add an image" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--amber-400 mdl-color-text--white">
                  <i class="material-icons">image</i>
                </button>
              </form>
            </div>
          </div>

          <div id="must-signin-snackbar" class="mdl-js-snackbar mdl-snackbar">
            <div class="mdl-snackbar__text"></div>
            <button class="mdl-snackbar__action" type="button"></button>
          </div>

        </div>
      </main>
    </div>





    <firebase-auth id="auth" user="{{user}}" signed-in="{{signedIn}}" provider="google" on-error="showError">
    </firebase-auth>


  </template>



  <script>Polymer({is:"fchat2-main",properties:{title:{type:String,notify:!0},signedIn:{type:Boolean,notify:!0}},observers:["_signedinfct(signedIn)"],_signedinfct:function(e){if(1==e&&(this.user=this.$.auth.user,this.signedIn)){this.user.photoURL,this.user.displayName;this.loadMessages()}},attached:function(){console.log(this.localName+"#"+this.id+" has local DOM initialized"),this.messageList=document.getElementById("messages"),this.messageForm=document.getElementById("message-form"),this.messageInput=document.getElementById("message"),this.submitButton=document.getElementById("submit"),this.submitImageButton=document.getElementById("submitImage"),this.imageForm=document.getElementById("image-form"),this.mediaCapture=document.getElementById("mediaCapture"),this.userPic=document.getElementById("user-pic"),this.userName=document.getElementById("user-name"),this.signInButton=document.getElementById("sign-in"),this.signOutButton=document.getElementById("sign-out"),this.signInSnackbar=document.getElementById("must-signin-snackbar"),this.messageForm.addEventListener("submit",this.saveMessage.bind(this));var e=this.toggleButton.bind(this);this.messageInput.addEventListener("keyup",e),this.messageInput.addEventListener("change",e),this.submitImageButton.addEventListener("click",function(){this.mediaCapture.click()}.bind(this)),this.mediaCapture.addEventListener("change",this.saveImageMessage.bind(this)),this.MESSAGE_TEMPLATE='<div class="message-container"><div class="spacing"><div class="pic"></div></div><div class="message"></div><div class="name"></div></div>',this.LOADING_IMAGE_URL="https://www.google.com/images/spin-32.gif",this.storage=firebase.storage()},loadMessages:function(){this.messagesRef=firebase.database().ref("messages"),this.messagesRef.off();var e=function(e){var t=e.val();this.displayMessage(e.key,t.name,t.text,t.photoUrl,t.imageUrl)}.bind(this);this.messagesRef.limitToLast(12).on("child_added",e),this.messagesRef.limitToLast(12).on("child_changed",e)},saveMessage:function(e){if(e.preventDefault(),this.messageInput.value&&this.checkSignedInWithMessage()){var t=this.$.auth.user;this.messagesRef.push({name:t.displayName,text:this.messageInput.value,photoUrl:t.photoURL||"/images/profile_placeholder.png"}).then(function(){this.resetMaterialTextfield(this.messageInput),this.toggleButton()}.bind(this)).catch(function(e){console.error("Error writing new message to Firebase Database",e)})}},setImageUrl:function(e,t){e.startsWith("gs://")?(t.src=this.LOADING_IMAGE_URL,this.storage.refFromURL(e).getMetadata().then(function(e){t.src=e.downloadURLs[0]})):t.src=e},saveImageMessage:function(e){var t=e.target.files[0];if(this.imageForm.reset(),!t.type.match("image.*")){var s={message:"You can only share images",timeout:2e3};return void this.signInSnackbar.MaterialSnackbar.showSnackbar(s)}if(this.checkSignedInWithMessage()){var i=this.$.auth.user;this.messagesRef.push({name:i.displayName,imageUrl:this.LOADING_IMAGE_URL,photoUrl:i.photoURL||"/images/profile_placeholder.png"}).then(function(e){this.storage.ref(i.uid+"/"+Date.now()+"/"+t.name).put(t,{contentType:t.type}).then(function(t){var s=t.metadata.fullPath;e.update({imageUrl:this.storage.ref(s).toString()})}.bind(this)).catch(function(e){console.error("There was an error uploading a file to Firebase Storage:",e)})}.bind(this))}},checkSignedInWithMessage:function(){if(this.signedIn)return!0;var e={message:"You must sign-in first",timeout:2e3};return this.signInSnackbar.MaterialSnackbar.showSnackbar(e),!1},displayMessage:function(e,t,s,i,a){var n=document.getElementById(e);if(!n){var r=document.createElement("div");r.innerHTML=this.MESSAGE_TEMPLATE,n=r.firstChild,n.setAttribute("id",e),this.messageList.appendChild(n)}i&&(n.querySelector(".pic").style.backgroundImage="url("+i+")"),n.querySelector(".name").textContent=t;var o=n.querySelector(".message");if(s)o.textContent=s,o.innerHTML=o.innerHTML.replace(/\n/g,"<br>");else if(a){var g=document.createElement("img");g.addEventListener("load",function(){this.messageList.scrollTop=this.messageList.scrollHeight}.bind(this)),this.setImageUrl(a,g),o.innerHTML="",o.appendChild(g)}setTimeout(function(){n.classList.add("visible")},1),this.messageList.scrollTop=this.messageList.scrollHeight,this.messageInput.focus()},toggleButton:function(){this.messageInput.value?this.submitButton.removeAttribute("disabled"):this.submitButton.setAttribute("disabled","true")},resetMaterialTextfield:function(e){e.value="",e.parentNode.MaterialTextfield.boundUpdateClassesHandler()}});</script>



  
</dom-module>
</div><dom-module id="shop-base">
  <template>
    <style include="shop-common-styles">

      .hero-image {
        position: relative;
        height: 320px;
        overflow: hidden;
        margin-bottom: 32px;
      }

      google-map {
        height: 600px;
      }

      .hero-image {
        --shop-image-img: {
          position: absolute;
          top: 0;
          bottom: 0;
          left: -9999px;
          right: -9999px;
          max-width: none;
        };
      }

      paper-tabs {
        @apply(--layout-center);
        --paper-tab-ink: #E57373;
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
        width: 35%;
        text-transform: uppercase;
        margin-bottom: 3px;

      }

      #menu {


      }

      paper-tab.iron-selected {
        color: #E57373;

      }

      paper-tab {
      --paper-tab-ink: #E57373;
      }

      --paper-tab-ink: #E57373;

      .grid {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-justified);
        margin: 0 10px 32px 10px;
        padding: 0;
        list-style: none;
      }

      .grid li {
        -webkit-flex: 1 1;
        flex: 1 1;
        -webkit-flex-basis: 33%;
        flex-basis: 33%;
        max-width: 33%;
      }

      .grid a {
        display:block;
        text-decoration: none;
      }

      @media (max-width: 767px) {
        .hero-image {
          display: none;
        }
        .grid{
          @apply(--layout-vertical);
        }

        .grid  li {
          -webkit-flex-basis: 100%;
          flex-basis: 100%;
          max-width: 100%;
        }
        paper-tabs {
          @apply(--layout-center);
          font-family: 'Roboto', 'Noto', sans-serif;
          -webkit-font-smoothing: antialiased;
          width: 75%;
          text-transform: uppercase;
          margin-bottom: 1px;
        }
      }
    </style>



    <app-route route="[[route]]" pattern="/:shop" data="{{routeData}}" tail="{{subroute}}">
    </app-route>

    <firebase-query id="query" path="/items" data="{{items}}" order-by-child="/shopName" start-at="{{routeData.shop}}" end-at="{{routeData.shop}}">
    </firebase-query>

    <firebase-query id="queryAddress" path="/shops" order-by-child="/shopName" start-at="{{routeData.shop}}" end-at="{{routeData.shop}}" data="{{shopData}}">
    </firebase-query>

    <firebase-query id="menuTags" path="/tags" data="{{tags}}" order-by-child="/shopName" start-at="[[routeData.shop]]" end-at="[[routeData.shop]]" limit-to-first="10">
    </firebase-query>


      <app-header role="navigation" id="header" effects="waterfall" condenses="" reveals="">
        <div class="layout horizontal center-justified">
        <paper-tabs selected="{{selected}}" no-bar="">
          <paper-tab>Menu</paper-tab>
          <paper-tab>About</paper-tab>
          <paper-tab>Maps</paper-tab>
          <paper-tab>Chat</paper-tab>
          <paper-tab>Chat2</paper-tab>
        </paper-tabs>
      </div>
      </app-header>

      <iron-pages selected="{{selected}}">
        <div>
          <div class="layout horizontal center-justified">
            <paper-tabs id="menu" scrollable="" selected="{{displayTag}}" no-bar="" attr-for-selected="label">
                <template is="dom-repeat" items="[[tags]]" as="tag">
                  <paper-tab label="{{tag.tag}}">[[tag.tag]]</paper-tab>
                </template>
            </paper-tabs>
        </div>
          <iron-pages selected="{{displayTag}}" attr-for-selected="name">
            <div name="{{displayTag}}">
            <ul class="grid">
              <template is="dom-repeat" items="[[items]]" as="item" filter="{{computeFilterTags(displayTag)}}">
                <li>
                  [[item.name]]
                  <a href$="[[_getItemHref(item)]]">
                    <shop-list-menu item="[[item]]"></shop-list-menu>
                  </a>
                </li>
              </template>
            </ul>
          </div>
        </iron-pages>
      </div>
        <div>
          [[shopAbout]]
        </div>

        <div>
          <google-map id="map" map="{{map}}" atitude="35.6895" longitude="139.6917" api-key="AIzaSyA_tK6zo3FBiuiXoXocS_-qLTS0KDyVd5E" zoom="15 " fit-to-markers="">
            <template is="dom-repeat" items="[[shopData]]" as="shop">
              <google-map-marker style="transit-layer" map="[[map]]" latitude="{{shop.shopLat}}" longitude="{{shop.shopLng}}" title="{[routeData.shop}}" draggable="false"></google-map-marker>
            </template>
          </google-map>
        </div>

        <div id="firechatwrapper">
          
          
        </div>

        <div>
          
          <fchat2-main></fchat2-main>
        </div>
      </iron-pages>

  </template>

  <script>

    Polymer({

      is: 'shop-base',

      ready: function () {
           // make global values available on instance.
           this.selected = this.shopTags;
       },

      properties: {

        category: Object,

        shopName: String,

        visible: Boolean,

        route: Object,

        routeData: Object,

        item: Object,

        menuTitles : Object,

        addressQueryResult: {
          type: Array,
          notify: true,
        },

        shopAbout: {
          type: String,
          notify: true,
        },

        shopAddress: {
          type: Number,
          notify: true,
        },

        shopLat: {
          type: String,
          notify: true,
        },
        displayTag: {
          type: String,
          notify: true
        },

        shopLong: {
          type: String,
          notify: true,
        },
      },

      observers: [
        '_shopChanged(routeData.shop)'
      ],


      ready: function() {
        document.title = this.routeData.shop + ' - SHOP';
        shopName = this.routeData.shop;

        this.menuTitles = [
          {
            name: 'menu',
            title: 'Our Offerings'
          },
          {
            name: 'about',
            title: 'About Us'
          },
          {
            name: 'location',
            title: 'Our Location'
          },
          {
            name: 'chat',
            title: 'Chat with Us'
          }
        ];

        //console.log("aaa" + this.routeData.shop);

        this.initChat();

      },

      _getListItems: function(items) {
        // Return placeholder items when the items haven't loaded yet.
        return items || [{},{},{},{},{},{},{},{},{},{}];
      },

      _getItemHref: function(item) {
        console.log(this.displayTag);
        // By returning null when `itemId` is undefined, the href attribute won't be set and
        // the link will be disabled.
        // console.log(this.routeData.shop);
        return item.shopName ? ['/detail', item.shopName, item.itemName, item.itemid].join('/') : null;
      },

      _shopChanged: function(shopName) {

          this.debounce('change-shop', function() {
            // Notify the category and the page's title
            this.fire('change-shop', {
              shopName: shopName.toUpperCase()
            });
          });

      },

      _getPluralizedQuantity: function(quantity) {
        if (!quantity) {
          return '';
        }
        var pluralizedQ = quantity === 1 ? 'item' : 'items';
        return  '(' + quantity + ' ' + pluralizedQ + ')';
      },

      _notifyNetworkStatus: function() {
        var oldOffline = this.offline;
        this.offline =  !navigator.onLine;
        // Show the snackbar if the user is offline when starting a new session
        // or if the network status changed.
        if (this.offline || (!this.offline && oldOffline === true)) {
          if (!this._networkSnackbar) {
            this._networkSnackbar = document.createElement('shop-snackbar');
            Polymer.dom(this.root).appendChild(this._networkSnackbar);
          }
          Polymer.dom(this._networkSnackbar).innerHTML = this.offline ?
              'You are offline' : 'You are online';
          this._networkSnackbar.open();
        }
      },

      computeFilterTags: function(string) {
      if (!string) {
        // set filter to null to disable filtering
        return null;
      } else {
        // return a filter function for the current search string
        string = string.toLowerCase();
        return function(item) {
          var japanese_name = item.shopsTags.toLowerCase();
          var english_name = item.shopsTags.toLowerCase();
          return (japanese_name.indexOf(string) != -1 ||
              english_name.indexOf(string) != -1);

        };
      }
    },

      _toggleDrawer: function() {
        this.drawerOpened = !this.drawerOpened;
      },

      initChat() {

        var user = firebase.auth().currentUser;
        var chatRef = firebase.database().ref("chat");
        var chat = new FirechatUI(chatRef, this.$.firechatwrapper);
        if (user != null) {
            chat.setUser(user.uid, user.displayName);
        }

      }

    });

  </script>

</dom-module>
</body></html>